const mySQLDate="",defaultLocationDisplayFormat="medium",sideNavOptions={edge:"left",closeOnClick:!1,breakpoint:1199,menuWidth:240,timeDurationOpen:500,timeDurationClose:500,timeDurationOverlayOpen:200,timeDurationOverlayClose:200,easingOpen:"easeInOutQuad",easingClose:"easeInOutQuad",showOverlay:!0,showCloseButton:!1,slim:!1,onOpen:null,onClose:null,mode:"over"},toastrOptions={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"md-toast-bottom-right",preventDuplicates:!0,onclick:null,showDuration:300,hideDuration:1e3,timeOut:5e3,extendedTimeOut:1e3,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},days=[{0:{name:"Sunday",short:"Sun"}},{1:{name:"Monday",short:"Mon"}},{1:{name:"Tuesday",short:"Tue"}},{1:{name:"Wednesday",short:"Wed"}},{1:{name:"Thursday",short:"Thu"}},{1:{name:"Friday",short:"Fri"}},{1:{name:"Saturday",short:"Sat"}}],dowStart=1,short_dexcription_max=250,colorScheme=new Map,toggleAJAXResponse=!1,debugMode=!0;colorScheme.set(1,{name:"Color - 1",backGround:"#bdbdbd",borderColor:"#686868",textColor:"#000"}),colorScheme.set(2,{name:"Color - 2",backGround:"#54cbe3",borderColor:"#357f8e",textColor:"#000"}),colorScheme.set(3,{name:"Color - 3",backGround:"#49de94",borderColor:"#2d895b",textColor:"#000"}),colorScheme.set(4,{name:"Color - 4",backGround:"#ab8c82",borderColor:"#564641",textColor:"#000"}),colorScheme.set(5,{name:"Color - 5",backGround:"#ffcd17",borderColor:"#aa890f",textColor:"#000"}),colorScheme.set(6,{name:"Color - 6",backGround:"#96a3fa",borderColor:"#636ca5",textColor:"#000"}),colorScheme.set(7,{name:"Color - 7",backGround:"#fa983c",borderColor:"#a56428",textColor:"#000"}),colorScheme.set(8,{name:"Color - 8",backGround:"#17b3a3",borderColor:"#0c5e56",textColor:"#000"}),colorScheme.set(9,{name:"Color - 9",backGround:"#76838f",borderColor:"#30353a",textColor:"#fff"}),colorScheme.set(10,{name:"Color - 10",backGround:"#910112",borderColor:"#3c0007",textColor:"#fff"}),colorScheme.set(11,{name:"Color - 11",backGround:"#ff666b",borderColor:"#aa4447",textColor:"#000"}),colorScheme.set(12,{name:"Color - 12",backGround:"#3e8ef7",borderColor:"#295da2",textColor:"#000"}),colorScheme.set(13,{name:"Color - 13",backGround:"#f74584",borderColor:"#a22d57",textColor:"#000"}),colorScheme.set(14,{name:"Color - 14",backGround:"#5a9101",borderColor:"#253c00",textColor:"#fff"}),colorScheme.set(15,{name:"Color - 15",backGround:"#9463f7",borderColor:"#6141a2",textColor:"#fff"});const tableCellMaxChars=10,default_address_view="medium";let DEBUGMODE=!0,mdbPreloader=document.getElementById("mdb-preloader");$.fn.BuildDropDown=function(e){if(!e||!e.text_field||!e.id_field)return;let t=document.getElementById($(this).attr("id")),n=e.data?e.data:[],o=(e.class_list&&e.class_list,e.id_field?e.id_field:""),a=e.text_field?e.text_field:"",d=e.title?e.title:"Select Option",i=!!e.first_selectable&&e.firstSelectable,l=!!e.select2&&e.select2,r=e.type?e.type:"";if($(t).empty(),"multiple"===r&&t.setAttribute("multiple","multiple"),!1===i){let e=$(document.createElement("option")).prop({value:"",text:"-- "+d.charAt(0).toUpperCase()+d.slice(1)+" --",disabled:!0}).attr("readonly","readonly");$(t).append(e)}$.each(n,function(e,n){let d=n[o],i=n[a];$(t).append($(document.createElement("option")).prop({value:d,text:i.charAt(0).toUpperCase()+i.slice(1)}))}),$(t).val(""),l&&$(t).select2()},jQuery.fn.dataTable.Api.register("page.jumpToData()",function(e,t){var n=this.column(t,{order:"current"}).data().indexOf(e);if(n>=0){var o=Math.floor(n/this.page.info().length);this.page(o).draw(!1)}return this});const clear_validation=function(e){$(".autocomplete-suggestions").hide();var t=$(e).validate();$("[name]",e).each(function(){t.successList.push(this),t.showErrors()}),t.resetForm(),t.reset()},get_errors=function(e){},validator_init=function(e){let t={},n={},o={};return e&&(e.rules&&(t=e.rules),e.messages&&(n=e.messages),e.groups&&(o=e.groups)),jQuery.validator.setDefaults({rules:t,messages:n,groups:o,ignore:"",success:"valid",invalidHandler:function(e,t){t.numberOfInvalids();let n=t.findLastActive()||t.errorList.length&&t.errorList[0].element;n&&$(n).closest(".accordion-body").collapse("show")},errorElement:"span",highlight:function(e){let t=$(e).attr("id"),n=$("#"+t),o=$("#"+t+"-error");o.attr("data-ref")?$("#"+o.attr("data-ref")).addClass("is-invalid"):(n.parent().find("span.select2").addClass("is-invalid"),n.addClass("is-invalid")),o&&o.css({display:"block"})},unhighlight:function(e){let t=$(e).attr("id"),n=$("#"+t),o=$("#"+t+"-error");n.parents("div.form-element").find("span.select2").removeClass("is-invalid"),n.removeClass("is-invalid"),o&&o.css({display:"none"})},errorPlacement:function(e,t){let n=t.attr("id");$("#"+n+"-error").html(e)},submitHandler:function(e){return!0}}),jQuery.validator.addMethod("postalCode",function(e){return/^((\d{5}-\d{4})|(\d{5})|([A-Z]\d[A-Z]\s\d[A-Z]\d))$/.test(e)},"Please enter a valid postal code."),jQuery.validator.addMethod("phoneUS",function(e,t){return e=e.replace(/\s+/g,""),this.optional(t)||e.length>9&&e.match(/^(\+?1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)},"Please specify a valid phone number"),jQuery.validator.addMethod("phoneIT",function(e,t){return e=e.replace(/\s+/g,""),this.optional(t)||e.length>9&&e.match(/^(\+?1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)},"Please specify a valid phone number"),jQuery.validator},toNumbers=e=>e.map(Number),remove_nulls=function(e){let t={};return $.each(e,function(e,n){null===n||(t[e]=n)}),t},buildMap=function(e,t){let n=new Map;return $.each(e,function(e,o){n.set(o[t],o)}),n},getListOfIds=function(e){if(e){if("string"==typeof e){let t=e.replace(/\s/g,"");return Array.from(t.split(","),Number)}if("object"==typeof e)return e}return[]},sendGetRequest=function(e,t,n){let o=[];if(!e||!t){let n=[];return e||n.push("url"),t||n.push("data_to_send"),handleError("Missing Data: "+n.join(", "))}$.getJSONRequest(e,t,function(e,t,a){return"success"===t&&void 0!==e.result?(o=e.result,n(o)):"failed"===t&&void 0===e.error?handleError("failed"):"success"===t&&void 0!==e.error?(Console.log(e.error),handleError(e.error)):void 0})},sendPostRequest=function(e,t,n){let o=[];if(!e||!t)return e||(void 0).push("url"),t||(void 0).push("data_to_send"),handleError("Missing Data: "+(void 0).join(", "));$.postJSON(e,t,function(e,t,a){return Console.log("data",e),Console.log("status",t),Console.log("xhr",a),"success"===t&&void 0!==e.result?e.result?(o=e.result,n(o)):handleError("Error Posting Data 1"):"failed"===t&&void 0===e.result?e.error?handleError(e.error):handleError("Error Posting Data"):handleError("Error Posting Data 2")})},_display_ajax_error=function(e,t,n){let o="",a={message:"",status:"",uri:n};return Console.log("jqXHR",e.responseText),o=0===e.status?"Not connected, verify Network.":404===e.status?"Requested page( "+n+" ) not found. [404]":500===e.status?e.responseJSON?e.responseJSON:"Internal Server Error [500].":"parsererror"===t?"Requested JSON parse failed.":"timeout"===t?"Time out error.":"abort"===t?"Ajax request aborted.":"Uncaught Error."+e.responseText,a.message=o,a.status=e.status,a.uri=n,a.jqXHR=e,a},handleError=function(e){e||(e="3Error processing request"),toastr.error(e)},validInt=function(e){return e&&!isNaN(parseInt(e))?parseInt(e):null},formatDateMySQL=function(e){if(!e){new Date}return moment(e).format("YYYY-MM-DD HH:mm:ss")},resize_elements=function(){const e=document.getElementById("page"),t=document.getElementById("main"),n=document.getElementsByClassName("double-nav"),o=document.getElementById("screen_width"),a=document.getElementById("screen_height"),d=document.getElementsByClassName("page-footer"),i=document.getElementById("slide-out"),l=document.getElementById("page_header");let r=0,c=0,s=0,u=0,_=0,m=0;r=window.innerHeight,c=window.innerWidth,$.each(n,function(e,t){let n=isNaN(parseInt($(t).outerHeight()))?0:parseInt($(t).outerHeight());s+=n}),$.each(d,function(e,t){let n=isNaN(parseInt($(t).outerHeight()))?0:parseInt($(t).outerHeight());m+=n});let p=r-m-s-1+"px";i&&(_=isNaN(parseInt($(i).outerHeight()))?0:parseInt($(i).outerHeight()),u=isNaN(parseInt($(i).width()))?0:parseInt($(i).width())),e&&a&&o&&(t&&$(t).css({"padding-left":u+"px","min-height":r-m-s+"px!important"}),e&&e.setAttribute("style","min-height:"+p+"!important"),l&&l.setAttribute("style","margin-top:"+s+"px;"),a.innerText=r+"",o.innerText=c+"")},debounce=function(e){var t;return function(n){t&&clearTimeout(t),t=setTimeout(e,100,n)}},populateMultiSelect=function(e,t){for(var n,o=0,a=t.options.length;o<a;o++)n=t.options[o],-1!==e.indexOf(n.value)&&(n.selected=!0)},addTinyMCE=function(e){tinymce.init({selector:"#"+e,menubar:!1,height:"400",plugins:"print visualblocks visualchars charmap hr pagebreak advlist lists",content_css:["https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;0,700;0,800;1,300;1,400;1,600;1,700;1,800&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap","/assets/css/bootstrap.min.css","/assets/css/style.css"],body_class:"p-2",font_formats:"Andale Mono=andale mono,times; Arial=arial,helvetica,sans-serif; Arial Black=arial black,avant garde; Book Antiqua=book antiqua,palatino; Comic Sans MS=comic sans ms,sans-serif; Courier New=courier new,courier; Georgia=georgia,palatino; Helvetica=helvetica; Impact=impact,chicago; Open Sans=Open Sans; Roboto=Roboto;Symbol=symbol; Tahoma=tahoma,arial,helvetica,sans-serif; Terminal=terminal,monaco; Times New Roman=times new roman,times; Trebuchet MS=trebuchet ms,geneva; Verdana=verdana,geneva; Webdings=webdings; Wingdings=wingdings,zapf dingbats",toolbar1:"undo redo | styleselect | fontselect fontsizeselect | removeformat | numlist bullist checklist | outdent indent ",toolbar2:"cut copy | bold italic underline strikethrough | forecolor | alignleft aligncenter alignright alignjustify | backcolor",content_style:'body { font-family:"Roboto",sans-serif", sans-serif; font-size:14px; font-weight: 400 }',style_formats:[{title:"Headers",items:[{title:"h1",block:"h1"},{title:"h2",block:"h2"},{title:"h3",block:"h3"},{title:"h4",block:"h4"},{title:"h5",block:"h5"},{title:"h6",block:"h6"}]},{title:"Blocks",items:[{title:"p",block:"p"},{title:"div",block:"div"},{title:"pre",block:"pre"}]},{title:"Containers",items:[{title:"section",block:"section",wrapper:!0,merge_siblings:!1},{title:"article",block:"article",wrapper:!0,merge_siblings:!1},{title:"blockquote",block:"blockquote",wrapper:!0},{title:"hgroup",block:"hgroup",wrapper:!0},{title:"aside",block:"aside",wrapper:!0},{title:"figure",block:"figure",wrapper:!0}]}],branding:!1,resize:!1,setup:function(e){e.on("change",function(){e.save()})}})},htmlDecode=function(e){return $("<textarea/>").html(e).text()},is_null=function(e){return null==e};function decodeHtml(e){e||(e="");var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#039;":"'"};return e.replace(/&amp;|&lt;|&gt;|&quot;|&#039;/g,function(e){return t[e]})}function escapeHtml(e){e||(e="");var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(e){return t[e]})}const htmlEncode=function(e){return $("<textarea/>").text(e).html()},paddy=function(e,t,n){var o=void 0!==n?n:"0",a=new Array(1+11).join(o);return(a+e).slice(-a.length)},generateCodeDirectId=function(e){if(!e)return"";var t,n,o,a;return"D"+(t=14,o=void 0!==n?n:"0",((a=new Array(1+11).join(o))+t).slice(-a.length))},getDate=function(e){return e.pickadate("picker").get()};jQuery.extend({postJSON:function(e,t,n){let o=$.ajax({url:e,type:"POST",data:t,dataType:"json"});return o.done(function(e){if($.isFunction(n))return n(e,"success"),!0}),o.fail(function(t,o,a){return console.error("Request failed",_display_ajax_error(t,o,e)),$.isFunction(n)&&(t.responseJSON,n(t,"failed")),!1}),o},getJSONRequest:function(e,t,n){let o=$.ajax({url:e,type:"GET",data:t,dataType:"json",async:!0});o.done(function(e){$.isFunction(n)&&n(e,"success")}),o.fail(function(t,o,a){if(void 0!==o){let n=_display_ajax_error(t,o,e);handleError(n.message),Console.log(n)}else{let n=_display_ajax_error(t,o,e);handleError(n.message),Console.log(n)}$.isFunction(n)&&n(a,"failed")})},getJSON:function(e,t,n){let o=$.ajax({url:e,type:"GET",data:t,dataType:"json",async:!1});o.done(function(e){$.isFunction(n)&&n(e,"success")}),o.fail(function(t,o,a){Console.log("Request failed"),Console.log(_display_ajax_error(t,o,e)),$.isFunction(n)&&n(a,"failed")})}});const logger={log:function(){Console.log(args)}},infoDialog=function(e,t){$(`\n        \x3c!--Modal: modalConfirm--\x3e\n        <div class="modal fade" id="modalConfirm" tabindex="-1" role="dialog" aria-labelledby="modalConfirmationLabel" aria-hidden="true">\n\t<div class="modal-dialog modal-sm modal-notify modal-info" role="document">\n\t\t\x3c!--Content--\x3e\n\t\t<div class="modal-content text-center">\n\t\t\t\x3c!--Header--\x3e\n\t\t\t<div class="modal-header d-flex justify-content-center">\n\t\t\t\t<p class="heading">${e}</p>\n\t\t\t</div>\n\n\t\t\t\x3c!--Body--\x3e\n\t\t\t<div class="modal-body">\n\t\t\t\t<i class="fas fa-info fa-4x animated rotateIn"></i>\n\t\t\t</div>\n\n\t\t\t\x3c!--Footer--\x3e\n\t\t\t<div class="modal-footer flex-center">\n\t\t\t\t<a class="btn btn-outline-info btn-yes">yes</a>\n\t\t\t\t<a type="button" class="btn btn-info waves-effect btn-no">no</a>\n\t\t\t</div>\n\t\t</div>\n\t\t\x3c!--/.Content--\x3e\n\t</div>\n</div>\n        \x3c!--Modal: modalConfirm--\x3e\n    `).appendTo("body"),$("#modalConfirm").modal({backdrop:"static",keyboard:!1}),$(".btn-yes").click(function(){t(!0),$("#modalConfirm").modal("hide")}),$(".btn-no").click(function(){t(!1),$("#modalConfirm").modal("hide")}),$("#modalConfirm").on("hidden.bs.modal",function(){$("#modalConfirm").remove()})},confirmDialog=function(e,t){$(`\n        \x3c!--Modal: modalConfirm--\x3e\n        <div class="modal fade" id="modalConfirm" tabindex="-1" role="dialog" aria-labelledby="modalConfirmationLabel" aria-hidden="true">\n            <div class="modal-dialog modal-sm modal-notify modal-info" role="document">\n                \x3c!--Content--\x3e\n                <div class="modal-content text-center">\n                    \x3c!--Header--\x3e\n                    <div class="modal-header d-flex justify-content-center">\n                        <p class="heading">${e}</p>\n                    </div>\n        \n                    \x3c!--Body--\x3e\n                    <div class="modal-body">\n                        <i class="fas fa-check fa-4x mb-3 animated rotateIn"></i>\n                    </div>\n        \n                    \x3c!--Footer--\x3e\n                    <div class="modal-footer flex-center">\n                        <a class="btn btn-outline-info btn-yes">yes</a>\n                        <a type="button" class="btn btn-info waves-effect btn-no">no</a>\n                    </div>\n                </div>\n                \x3c!--/.Content--\x3e\n\t        </div>\n        </div>\n        \x3c!--Modal: modalConfirm--\x3e\n    `).appendTo("body"),$("#modalConfirm").modal({backdrop:"static",keyboard:!1}),$(".btn-yes").click(function(){t(!0),$("#modalConfirm").modal("hide")}),$(".btn-no").click(function(){t(!1),$("#modalConfirm").modal("hide")}),$("#modalConfirm").on("hidden.bs.modal",function(){$("#modalConfirm").remove()})},deleteDialog=function(e,t){$(`\n        \x3c!--Modal: modalConfirm--\x3e\n        <div class="modal fade" id="modalConfirm" tabindex="-1" role="dialog" aria-labelledby="modalConfirmationLabel" aria-hidden="true">\n\t<div class="modal-dialog modal-sm modal-notify modal-danger" role="document">\n\t\t\x3c!--Content--\x3e\n\t\t<div class="modal-content text-center">\n\t\t\t\x3c!--Header--\x3e\n\t\t\t<div class="modal-header d-flex justify-content-center">\n\t\t\t\t<p class="heading">${e}</p>\n\t\t\t</div>\n\n\t\t\t\x3c!--Body--\x3e\n\t\t\t<div class="modal-body">\n\t\t\t\t<i class="fas fa-times fa-4x animated rotateIn"></i>\n\t\t\t</div>\n\n\t\t\t\x3c!--Footer--\x3e\n\t\t\t<div class="modal-footer flex-center">\n\t\t\t\t<a class="btn btn-outline-danger btn-yes">yes</a>\n\t\t\t\t<a type="button" class="btn btn-danger waves-effect btn-no">no</a>\n\t\t\t</div>\n\t\t</div>\n\t\t\x3c!--/.Content--\x3e\n\t</div>\n</div>\n        \x3c!--Modal: modalConfirm--\x3e\n    `).appendTo("body"),$("#modalConfirm").modal({backdrop:"static",keyboard:!1}),$(".btn-yes").click(function(){t(!0),$("#modalConfirm").modal("hide")}),$(".btn-no").click(function(){t(!1),$("#modalConfirm").modal("hide")}),$("#modalConfirm").on("hidden.bs.modal",function(){$("#modalConfirm").remove()})},tinyEditor=function(){"use strict";let e;const t=function(e){tinymce.init({selector:"#"+e,menubar:!1,height:"400",plugins:"print visualblocks visualchars charmap hr pagebreak advlist lists",content_css:["https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;0,700;0,800;1,300;1,400;1,600;1,700;1,800&family=Roboto+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap","/public/css/bootstrap.min.css","/public/css/style.css","/public/css/variant.css"],body_class:"p-2",font_formats:"Andale Mono=andale mono,times; Arial=arial,helvetica,sans-serif; Arial Black=arial black,avant garde; Book Antiqua=book antiqua,palatino; Comic Sans MS=comic sans ms,sans-serif; Courier New=courier new,courier; Georgia=georgia,palatino; Helvetica=helvetica; Impact=impact,chicago; Open Sans=Open Sans;Symbol=symbol; Tahoma=tahoma,arial,helvetica,sans-serif; Terminal=terminal,monaco; Times New Roman=times new roman,times; Trebuchet MS=trebuchet ms,geneva; Verdana=verdana,geneva; Webdings=webdings; Wingdings=wingdings,zapf dingbats",toolbar1:"undo redo | styleselect | fontselect fontsizeselect | removeformat | numlist bullist checklist | outdent indent ",toolbar2:"cut copy | bold italic underline strikethrough | forecolor | alignleft aligncenter alignright alignjustify | backcolor",content_style:'body { font-family:"Open Sans", sans-serif; font-size:14px; font-weight: 400 }',style_formats:[{title:"Headers",items:[{title:"h1",block:"h1"},{title:"h2",block:"h2"},{title:"h3",block:"h3"},{title:"h4",block:"h4"},{title:"h5",block:"h5"},{title:"h6",block:"h6"}]},{title:"Blocks",items:[{title:"p",block:"p"},{title:"div",block:"div"},{title:"pre",block:"pre"}]},{title:"Containers",items:[{title:"section",block:"section",wrapper:!0,merge_siblings:!1},{title:"article",block:"article",wrapper:!0,merge_siblings:!1},{title:"blockquote",block:"blockquote",wrapper:!0},{title:"hgroup",block:"hgroup",wrapper:!0},{title:"aside",block:"aside",wrapper:!0},{title:"figure",block:"figure",wrapper:!0}]}],branding:!1,resize:!1,setup:function(e){e.on("change",function(){e.save()})}})};return{addTinyMCE:function(e){t(e)},init:function(){(e=document.querySelectorAll(".but_toggle")).forEach(e=>e.addEventListener("click",n=>{if(e.dataset.texted){let n=e.dataset.texted,o=$("#"+n),a=o.parents("div.card");tinyMCE.get(n)?(o.val(htmlEncode(o.val())),tinymce.remove("#"+n),a.removeClass("is-fullscreen")):(o.val(decodeHtml(o.val())),a.addClass("is-fullscreen"),console.dir(a),t(n))}}))}}}();$(function(){tinyEditor.init()});const Season=function(){"use strict";let e=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4,t=new Map;const n=function(n){let o={id:null,color_scheme_id:null,name:null,view_product_index:1,view_product_index_filter:1,view_product_index_search:1,view_product_edit:1,view_product_package_edit:1,view_product_package_index:1,enabled:1,date_created:formatDateMySQL(),created_by:e,date_modified:formatDateMySQL(),modified_by:e,note:null,category_id:null,color_scheme:{id:null,name:null,background_color:null,border_color:null,text_color:null,sort_order:999,enabled:1,date_created:formatDateMySQL(),created_by:e,date_modified:formatDateMySQL(),modified_by:e,note:null}},a=isNaN(parseInt(n.category_id))?null:parseInt(n.category_id);o.id=isNaN(parseInt(n.id))?null:parseInt(n.id),o.color_scheme_id=isNaN(parseInt(n.color_scheme_id))?null:parseInt(n.color_scheme_id),o.name=n.name?n.name:null,o.view_product_index=n.view_product_index?n.view_product_index:1,o.view_product_index_filter=n.view_product_index_filter?n.view_product_index_filter:1,o.view_product_index_search=n.view_product_index_search?n.view_product_index_search:1,o.view_product_edit=n.view_product_edit?n.view_product_edit:1,o.view_product_package_edit=n.view_product_package_edit?n.view_product_package_edit:1,o.view_product_package_index=n.view_product_package_index?n.view_product_package_index:1,o.enabled=n.enabled?n.enabled:1,o.date_created=n.date_created?n.date_created:formatDateMySQL(),o.created_by=isNaN(parseInt(n.created_by))?e:parseInt(n.created_by),o.date_modified=n.date_modified?n.date_modified:formatDateMySQL(),o.modified_by=isNaN(parseInt(n.modified_by))?e:parseInt(n.modified_by),o.note=n.note?n.note:null,o.category_id=isNaN(parseInt(n.category_id))?null:parseInt(n.category_id),o.color_scheme.id=isNaN(parseInt(n.color_scheme.id))?null:parseInt(n.color_scheme.id),o.color_scheme.name=n.color_scheme.name,o.color_scheme.background_color=n.color_scheme.background_color,o.color_scheme.border_color=n.color_scheme.border_color,o.color_scheme.text_color=n.color_scheme.text_color,o.color_scheme.sort_order=isNaN(parseInt(n.color_scheme.sort_order))?999:parseInt(n.color_scheme.sort_order),o.color_scheme.enabled=n.color_scheme.enabled,o.color_scheme.date_created=n.color_scheme.date_created?n.color_scheme.date_created:formatDateMySQL(),o.color_scheme.created_by=isNaN(parseInt(n.color_scheme.created_by))?e:parseInt(n.color_scheme.created_by),o.color_scheme.date_modified=n.color_scheme.date_modified?n.color_scheme.date_modified:formatDateMySQL(),o.color_scheme.modified_by=isNaN(parseInt(n.color_scheme.modified_by))?e:parseInt(n.color_scheme.modified_by),o.color_scheme.note=n.color_scheme.note,t.get(a)||t.set(a,{seasons:[]});let d=t.get(a);d.seasons&&d.seasons;return o},o=function(e){t=new Map,e&&$.each(e,function(e,t){Season.types.set(t.id,n(t))})};return{types:new Map,loadTypes:function(e){o(e)},init:function(e){!function(e){let t=[];e&&e.seasons&&(t=e.seasons),o(t)}(e)}}}();document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("div.panel").forEach(e=>{const t=$(e),n=t.find("div.panel-heading").find("div.panel-actions.panel-actions-keep").find("a.panel-action");$.each(n,function(e,n){let o=$(n).attr("data-toggle");if(o)switch(Console.log("dataToggle",o),o){case"panel-refresh":break;case"panel-collapse":Console.log("collapse");break;case"panel-fullscreen":n.addEventListener("click",function(){$(n).hasClass("fa-expand")?($(n).removeClass("fa-expand"),$(n).addClass("fa-compress"),t.addClass("is-fullscreen")):$(n).hasClass("fa-compress")&&($(n).removeClass("fa-compress"),$(n).addClass("fa-expand"),t.removeClass("is-fullscreen"))}),Console.log("fullscreen");break;case"panel-close":Console.log("close")}})})}),$.fn.table=function(e){"use strict";let t,n,o=[],a="display_list",d=$(this).attr("id");const i=document.getElementById(d);if($.fn.DataTable.isDataTable("#"+d))return;e&&(e.columnDefs&&(t=e.columnDefs),e.table_type&&(a=e.table_type),e.data&&(o=e.data));const l=function(){let e=$("#"+d+"_wrapper .dataTables_filter"),t=$("#"+d+"_wrapper .dataTables_length"),n=$("#"+d+"_wrapper .dataTables_info"),o=$("#"+d+"_wrapper .dataTables_paginate"),i=$("#"+d+"_wrapper"),l=$("#"+d+"_wrapper select");$("#"+d).parent("div").removeClass("col-sm-12").addClass("p-0 m-0 w-100 h-100"),i.find("label").each(function(){$(this).parent().append($(this).children())}),i.find("div.row").removeClass("row").addClass("d-flex justify-content-between"),e.find("input").each(function(){const e=$(this);e.attr("placeholder","Search"),e.removeClass("form-control-sm")}),e.find("label").remove(),e.parent("div").removeClass("col-sm-12 col-md-6").addClass("w-50"),n.parent("div").removeClass("col-sm-12 col-md-5").addClass("w-50 d-flex align-content-center flex-wrap px-0"),n.addClass("py-0"),o.parent("div").removeClass("col-sm-12 col-md-7").addClass("w-50 px-0"),o.addClass("py-0"),o.find("ul.pagination").addClass("mb-0"),t.parent("div").removeClass("col-sm-12 col-md-6").addClass("w-50"),t.find("label").each(function(){$(this).addClass("mb-0 pb-0 mr-3 d-inline-block")}),l.removeClass("custom-select custom-select-sm form-control form-control-sm"),l.addClass("form-control d-inline-block"),"display_list"===a&&$("#"+d+">tbody>tr").css({cursor:"pointer"})},r=function(e){if(e)try{let t=e.id;n.page.jumpToData(t,0)}catch(e){Console.log(e)}},c=function(){try{let e=$("#"+d+"> tbody  > tr");$.each(e,function(e,t){$(t).removeClass("selected")})}catch(e){Console.log("clear_selected_rows",e)}};if(i)try{n=$(this).DataTable({pageLength:5,lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"All"]],data:o,columnDefs:t}),e.rowClick&&n.on("click","tr",function(){if($(this).find("td").hasClass("dataTables_empty"));else{c(),$(this).addClass("selected");let t=n.row(this).data();e.rowClick(t)}}),l()}catch(e){Console.log(e)}return{insertRow:function(e){!function(e){if(e)try{n.row.add(e).node().id=d+"_tr_"+e.id,n.draw(!1),n.page.jumpToData(e.id,0),l()}catch(e){Console.log(e)}}(e)},clearSelectedRows:function(){c()},deleteRow:function(e){!function(e){if(e)try{let t="#"+d+"_tr_"+e.id;n.row(t).remove().draw()}catch(e){Console.log(e)}}(e)},loadRow:function(e){r(e)},updateRow(e){!function(e){if(e)try{let t="#"+d+"_tr_"+e.id,o=e;n.row(t).data(o).draw(),r(e.id)}catch(e){Console.log(e)}l()}(e)}}},$.fn.BuildKeyword=function(e){if(!$(this).hasClass("keyword"))return;const t=$(this).attr("id"),n=document.getElementById(t);let o=new Map,a=($(n),$(`#${t} > div > div > button`)),d=$(`#${t} > div > input.user-release-input`),i=0,l=$(`#${t} > div > div.chips_container`);e||(e=[]),"string"==typeof e&&(e=e.split(",").map(function(e){return e.trim()})),jQuery.event.special.destroyed={remove:function(e){e.handler&&e.handler()}},d.on("keypress",function(e){13===e.which&&(m(),r=null)}),a.on("click",function(){m(),r=null});let r=null;const c=function(e){if(e){let t=e,n=t.text();o.get(n)&&(t.remove(),o.delete(n))}},s=function(e){},u=function(e){let n=o.get(e);if(n)toastr.error(`A tag for ${e} already exists`),o.set(e,n);else{let n=function(e){if(i+=1,e){let n=$("<div>"),a=$("<i>");return a.addClass("close fas fa-times").on("click",function(e){e.stopPropagation();let t=$(this).parents("div.chip");var n;n=(e=>{e&&($id=t.attr("id"),c(t))}),$('\n        \x3c!--Modal: modalConfirm--\x3e\n        <div class="modal fade" id="modalConfirm" tabindex="-1" role="dialog" aria-labelledby="modalConfirmationLabel" aria-hidden="true">\n\t<div class="modal-dialog modal-sm modal-notify modal-danger" role="document">\n\t\t\x3c!--Content--\x3e\n\t\t<div class="modal-content text-center">\n\t\t\t\x3c!--Header--\x3e\n\t\t\t<div class="modal-header d-flex justify-content-center">\n\t\t\t\t<p class="heading">Would you like to delete?</p>\n\t\t\t</div>\n\n\t\t\t\x3c!--Body--\x3e\n\t\t\t<div class="modal-body">\n\t\t\t\t<i class="fas fa-times fa-4x animated rotateIn"></i>\n\t\t\t</div>\n\n\t\t\t\x3c!--Footer--\x3e\n\t\t\t<div class="modal-footer flex-center">\n\t\t\t\t<a class="btn btn-outline-danger btn-yes">yes</a>\n\t\t\t\t<a type="button" class="btn btn-danger waves-effect btn-no">no</a>\n\t\t\t</div>\n\t\t</div>\n\t\t\x3c!--/.Content--\x3e\n\t</div>\n</div>\n        \x3c!--Modal: modalConfirm--\x3e\n    ').appendTo("body"),$("#modalConfirm").modal({backdrop:"static",keyboard:!1}),$(".btn-yes").click(function(){n(!0),$("#modalConfirm").modal("hide")}),$(".btn-no").click(function(){n(!1),$("#modalConfirm").modal("hide")}),$("#modalConfirm").on("hidden.bs.modal",function(){$("#modalConfirm").remove()})}),n.addClass("chip blue lighten-4 waves-effect").text(e).append(a).attr("id",t+"_"+i).on("click",function(e){let t=$(this);r=o.get(t.text());let n=t.attr("id");s(n)}),n}}(e);n&&(o.set(e,n),l&&l.append(n))}},_=function(e){$.each(e,function(e,t){t&&m(t)})},m=function(e){e||(e=d.val()),""!==e&&(u(e),d.val(""))};return _(e),{add:function(e){u(e)},delete:function(e){c(e)},build:function(){let e=[],t=Array.from(o.values());for(let n=0;n<t.length;n++){let o=t[n].text();e.push(o)}return e.join(",")},init:function(){_()}}};const Upload=function(e){this.file=e},_image_manager_is_cover_image=document.getElementById("image_manager_is_cover_image"),_image_manager_title=document.getElementById("image_manager_title"),_image_manager_caption=document.getElementById("image_manager_caption"),_image_manager_upload=document.getElementById("image_manager_upload"),_image_manager_alt_text=document.getElementById("image_manager_alt_text"),_image_manager_form_data=document.getElementById("image_manager_form_data"),_image_manager_image_id=document.getElementById("image_manager_id"),_provider_edit=document.getElementById("provider_edit"),_vendor_edit=document.getElementById("vendor_edit"),_provider_company_id=document.getElementById("provider_company_id"),_vendor_company_id=document.getElementById("vendor_company_id");Upload.prototype.getType=function(){return this.file.type},Upload.prototype.getSize=function(){return this.file.size},Upload.prototype.getName=function(){return this.file.name},Upload.prototype.doUpload=function(){let e=this,t=new FormData;t.append("file",this.file,this.getName()),t.append("upload_file",!0),t.append("title",""!==_image_manager_title.value?_image_manager_title.value:null),t.append("caption",""!==_image_manager_caption.value?_image_manager_caption.value:null),t.append("is_cover_image",!0!==_image_manager_is_cover_image.checked?parseInt(0):parseInt(1)),t.append("alt",""!==_image_manager_alt_text.value?_image_manager_alt_text.value:null),_provider_edit&&(t.append("directory_id",parseInt(_provider_company_id.value)),t.append("directory","company")),_vendor_edit&&(t.append("directory_id",parseInt(_vendor_company_id.value)),t.append("directory","company")),$.ajax({type:"POST",url:"/api/v1.0/images/update",xhr:function(){var t=$.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",e.progressHandling,!1),t},success:function(e){Console.log("data",e);let t,n=null;if(e&&e.result&&(n=e.result)[0]&&(t=n[0]),t){let e;_provider_edit&&(e=$("#companyImages").imageManager()),_vendor_edit&&(e=$("#companyImages").imageManager()),e.addImage(t),toastr.success("Image Uploaded"),Upload.prototype.resetForm(),$("button.dropify-clear").click()}},error:function(e){toastr.error("Error"),Console.log("error",e)},async:!0,data:t,cache:!1,contentType:!1,processData:!1,timeout:6e4})},Upload.prototype.progressHandling=function(e){var t=0,n=e.loaded||e.position,o=e.total;e.lengthComputable&&(t=Math.ceil(n/o*100)),$("#progress-wrp .progress-bar").css("width",+t+"%"),$("#progress-wrp .status").text(t+"%")},Upload.prototype.progressReset=function(){$("#progress-wrp .progress-bar").css("width","0%"),$("#progress-wrp .status").text("0%")},Upload.prototype.resetForm=function(){Upload.prototype.progressReset(),_image_manager_is_cover_image.checked=!1,_image_manager_image_id.value="",_image_manager_title.value="",_image_manager_upload.value="",_image_manager_caption.value="",_image_manager_alt_text.value="",_image_manager_upload.disabled=!1,$(_image_manager_form_data).hide()},Upload.prototype.populateForm=function(e){Upload.prototype.progressReset();e.path,e.name,e.extension;_image_manager_is_cover_image.checked=1===e.is_cover_image,_image_manager_image_id.value=e.id,_image_manager_title.value=e.title,_image_manager_caption.value=e.caption,_image_manager_alt_text.value=e.alt,$("button.dropify-clear").click(),_image_manager_upload.disabled=!0,$(_image_manager_form_data).show()},$("#image_manager_upload").on("change",function(){_image_manager_is_cover_image.checked=!1,_image_manager_image_id.value="",_image_manager_title.value="",_image_manager_caption.value="",_image_manager_alt_text.value="",$(_image_manager_form_data).show()}),$("#image_manager_clear_button").on("click",function(){Upload.prototype.resetForm()}),$.fn.imageManager=function(e){const t=$(this).find("div.carousel"),n=$(this).find("ol.carousel-indicators"),o=$(this).find("div.carousel-inner"),a=document.getElementById("companyImageManager"),d=document.getElementById("image_manager_is_cover_image"),i=document.getElementById("image_manager_title"),l=document.getElementById("image_manager_caption"),r=document.getElementById("image_manager_upload"),c=document.getElementById("image_manager_alt_text"),s=(document.getElementById("image_manager_form_data"),document.getElementById("image_manager_id")),u=($("#image_manager_form_data"),document.getElementById("vendor_edit")),_=document.getElementById("image_manager_cancel_upload");let m,p,y=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4,f=0,g="";const v={rules:{image_manager_title:{required:!0},image_manager_alt_text:{required:!0},image_manager_caption:{required:!0}},messages:{image_manager_title:{required:"Field Required"},image_manager_alt_text:{required:"Field Required"},image_manager_caption:{required:"Field Required"}}};$("#image_manager_upload_button").on("click",function(){a&&h()&&confirmDialog("Would you like to update?",e=>{e&&E()})}),$("button.dropify-clear").on("click",function(){$("input.dropify").trigger("change")}),$(_).on("click",function(){Upload.prototype.resetForm(),$("button.dropify-clear").trigger("click")});const b=function(e,t){if(e){Console.log("data",e);try{sendPostRequest("/api/v1.0/images/update",e,function(e,n,o){return e?t(e):(a="Oops: 1",void toastr.error(a));var a})}catch(e){Console.log(e)}}},h=function(){return $(a).valid()},I=function(e){m=$("#image_manager_upload").dropify({}),e&&(e.images&&x(e.images),e.id&&(g="carousel-"+e.id)),a&&(validator_init(v),p=$(a).validate()),t.carousel()},E=function(){let e=null;if(s)if(isNaN(parseInt(s.value))){let t=$(r);if(t&&t[0]&&t[0].files&&t[0].files[0]){e=t[0].files[0],new Upload(e).doUpload()}}else{let e=this.all.get(parseInt(s.value));e.alt=""!==c.value?c.value:null,e.caption=""!==l.value?l.value:null,e.is_cover_image=!0===d.checked?1:0,e.title=""!==i.value?i.value:null,_provider_edit&&(e.directory_id=parseInt(_provider_company_id.value),e.directory="company"),u&&(e.directory_id=parseInt(_provider_company_id.value),e.directory="company"),b(e,function(e){let t;Console.log("data",e),e&&e[0]&&(t=e[0],L(t))})}},C=function(e){let t={id:null,path:null,type:null,caption:null,alt:null,is_cover_image:0,enabled:1,date_created:formatDateMySQL(),created_by:y,date_modified:formatDateMySQL(),modified_by:y,note:null};return t.alt=e.alt?e.alt:"",t._caption=e.caption?e.caption:"This is a Test Caption 3",t.id=e.id?e.id:3,t.is_cover_image=e.is_cover_image?e.is_cover_image:0,t.path=e.path?e.path:"/company/1/image_3",t.title=e.title?e.title:"Image 3",t.type=e.type?e.type:"jpg",t},B=function(e,t){C(e);let n=e.alt?e.alt:"",o=e.name?e.name:"",a=e.caption?e.caption:"",d=e.id?e.id:3,i=e.is_cover_image?e.is_cover_image:0,l=e.path?e.path:"",r=e.title?e.title:"",c=e.extension?e.extension:"jpg",s=0===t?"active ":"",u=$("<H3>"),_=$("<img>"),m=$("<div>"),p=$("<div>"),y=$("<div>"),f=$("<div>"),g=$("<p>"),v=1===e.is_cover_image?" is_cover ":"";return m.addClass("carousel-item "+s+v),y.addClass("view").appendTo(m),_.addClass("d-block w-100 imageManager_edit").attr("src",`${l}/${o}.${c}`).data("imgid",d).data("is_cover",i).attr("alt",n).appendTo(y),f.addClass("mask rgba-blue-light").data("key",e).css({cursor:"pointer"}).on("click",function(){w($(this).data("key"))}).appendTo(y),u.addClass("").text(r).appendTo(p).css({cursor:"pointer"}).data("key",e).on("click",function(){w($(this).data("key"))}),g.addClass("").text(a).appendTo(p).data("key",e).css({cursor:"pointer"}).on("click",function(){w($(this).data("key"))}),p.addClass("carousel-caption").appendTo(m),m},w=function(e){Upload.prototype.populateForm(e)},k=function(e,t){let n=0===t?"active":"",o=1===e.is_cover_image?" is_cover ":"",a=$("<li>");return a.addClass(n+" "+o).attr("data-slide-to",t).attr("data-target","#carousel-companyImageManager"),a},x=function(e){f=0,n.empty(),o.empty(),this.all=new Map;for(let t=0;t<e.length;t++){let a=e[t];this.all.set(a.id,a),n.append(k(a,f)),o.append(B(a,f)),f+=1}},L=function(e){e&&(this.all.set(e.id,e),x(Array.from(this.all.values())))};return I(e),{addImage:function(e){!function(e){e&&(this.all.set(e.id,e),x(Array.from(this.all.values())))}(e)},reset:function(){},all:new Map,init:function(e){I(e)},loadAll:function(e){x(e)}}};const LocationTypes=function(){"use strict";document.getElementById("input_location_types_id"),document.getElementById("input_location_types_name"),document.getElementById("input_location_types_icon"),document.getElementById("input_location_types_sort_order"),document.getElementById("input_location_types_enabled"),document.getElementById("input_location_types_date_created"),document.getElementById("input_location_types_created_by"),document.getElementById("input_location_types_date_modified"),document.getElementById("input_location_types_modified_by"),document.getElementById("input_location_types_note");let e=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4;const t=function(t){let n={id:null,name:null,icon:null,sort_order:null,enabled:1,date_created:formatDateMySQL(),created_by:e,date_modified:formatDateMySQL(),modified_by:e,note:null};return t&&(n.id=t.id?t.id:null,n.name=t.name?t.name:null,n.icon=t.icon?t.icon:null,n.sort_order=t.sort_order?t.sort_order:null,n.enabled=t.enabled?t.enabled:1,n.date_created=t.date_created?t.date_created:formatDateMySQL(),n.created_by=t.created_by?t.created_by:created_by,n.date_modified=t.date_modified?t.date_modified:formatDateMySQL(),n.modified_by=t.modified_by?t.modified_by:modified_by,n.note=t.note?t.note:null),LocationTypes.detail=n,n};return{validator:null,detail:{},all:new Map,get:function(e){},load_all:function(e){var n;n=e,LocationTypes.all=new Map,n&&$.each(n,function(e,n){let o=t(n);LocationTypes.all.set("id",o)})},save:function(e){},init:function(){}}}(),AddressTypes=function(){"use strict";document.getElementById("input_address_types_id"),document.getElementById("input_address_types_name"),document.getElementById("input_address_types_sort_order"),document.getElementById("input_address_types_enabled"),document.getElementById("input_address_types_date_created"),document.getElementById("input_address_types_created_by"),document.getElementById("input_address_types_date_modified"),document.getElementById("input_address_types_modified_by"),document.getElementById("input_address_types_note");let e=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4;const t=function(t){let n={id:null,name:null,sort_order:null,enabled:1,date_created:formatDateMySQL(),created_by:e,date_modified:formatDateMySQL(),modified_by:e,note:null};return t&&(n.id=t.id?t.id:null,n.name=t.name?t.name:null,n.sort_order=t.sort_order?t.sort_order:null,n.enabled=t.enabled?t.enabled:1,n.date_created=t.date_created?t.date_created:formatDateMySQL(),n.created_by=t.created_by?t.created_by:created_by,n.date_modified=t.date_modified?t.date_modified:formatDateMySQL(),n.modified_by=t.modified_by?t.modified_by:modified_by,n.note=t.note?t.note:null),AddressTypes.detail=n,n};return{validator:null,detail:{},all:new Map,get:function(e){},load_all:function(e){var n;n=e,AddressTypes.all=new Map,n&&($.each(n,function(e,n){let o=t(n);AddressTypes.all.set("id",o)}),Console.log(" AddressTypes.all",AddressTypes.all))},save:function(e){},init:function(){}}}(),City=function(){"use strict";let e=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4;$("#form_product_search_hotel_product_location").on("change",function(){setTimeout(function(){},200)}).on("search",function(){}).on("click",function(e){"readonly"===$(this).attr("readonly")?e.preventDefault():$(this).select()}).autocomplete({serviceUrl:"/api/v1.0/autocomplete/cities",minChars:2,cache:!1,dataType:"json",triggerSelectOnValidInput:!1,paramName:"st",onSelect:function(e){Console.log("city",e),e.data&&Console.log("city",e)}});const t=function(e){toastr.error(e),Console.log(e)},n=e=>{$(e.target).parents("div.form-new-city")[0]||e.target.className.includes("select-add-option")||City.close()},o=function(t){let n={id:null,province_id:null,country_id:null,created_by:null,modified_by:null,sort_order:null,name:null,enabled:1,date_created:formatDateMySQL(),date_modified:formatDateMySQL(),note:null},o=null;return t&&(o=validInt(t.id),n={id:validInt(t.id),province_id:validInt(t.province_id),created_by:t.created_by?t.created_by:e,modified_by:t.created_by?t.created_by:e,sort_order:t.sort_order?t.sort_order:null,name:t.name?t.name:null,enabled:t.enabled?t.enabled:1,date_created:t.date_created?t.date_created:formatDateMySQL(),date_modified:t.date_modified?t.date_modified:formatDateMySQL(),note:t.note?t.note:null}),City.detail=n,n},a=function(e,n,o){City.all=new Map;let a=null;if(null!==City.id&&(a=City.id),o)return e&&n&&o?void function(e,n){if(!e)return t("Error Loading Province- Missing Data");try{sendGetRequest("/api/v1.0/cities",e,function(e,o,a){return e?n(e):t("Oops: 1")})}catch(e){return Console.log(e),t("Error Validating City")}}({country_id:parseInt(e),province_id:parseInt(n)},function(e){e&&(l(e),$(o).BuildDropDown({data:Array.from(City.all.values()),title:"City",id_field:"id",text_field:"name",first_selectable:!1}),""!==a&&null!==a&&$(o).val(a).trigger("change"))}):($(o).BuildDropDown({data:Array.from(City.all.values()),title:"City",id_field:"id",text_field:"name",first_selectable:!1}),void $(o).val("").trigger("change"))},d=function(e,t,o){e&&function(e,t,o){let a=$(e).attr("id"),d=$(e).parents("div.row"),i="";if(t&&(i=t),!a||!d[0])return;if(document.getElementById("form_new_city"))return;let l=document.createElement("div"),r=document.createElement("h5"),c=document.createElement("div"),s=document.createElement("div"),u=document.createElement("div"),_=document.createElement("div"),m=document.createElement("div"),p=document.createElement("div"),y=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div"),v=document.createElement("div"),b=document.createElement("div"),h=document.createElement("div"),I=document.createElement("input"),E=document.createElement("label"),C=document.createElement("button"),B=document.createElement("button");r.classList="card-title",r.innerText="City Details",l.id="form_new_city",l.classList=["card card-body m-3 form-new-city"],I.id="city_name",I.name="city_name",I.type="text",I.classList=["form-control "],E.htmlFor="city_name",E.innerHTML="Name:",h.id="city_name-error",C.classList=["btn btn-primary btn-sm waves-effect waves-light"],C.innerText="save",C.type="button",C.addEventListener("click",t=>{City.save(e,o)}),B.classList=["btn btn-outline-danger btn-sm waves-effect waves-light"],B.innerText="cancel",B.type="button",B.addEventListener("click",e=>{City.close()}),c.classList=["row"],s.classList=["row"],u.classList=["col-lg-3 mb-1"],_.classList=["col-lg-3 mb-1"],m.classList=["col-lg-3 mb-1"],p.classList=["col-lg-3 mb-1"],y.classList=["col-12 mb-1 text-right"],f.classList=["form-element"],g.classList=["form-element"],v.classList=["form-element"],b.classList=["form-element"],h.classList=["error w-100 text-center"],f.appendChild(E),f.appendChild(I),f.appendChild(h),u.appendChild(f),c.appendChild(u),c.appendChild(_),c.appendChild(m),c.appendChild(p),y.append(B),y.appendChild(C),s.appendChild(y),l.appendChild(r),l.appendChild(c),l.appendChild(s),d[0].appendChild(l),I.value=i,I.focus({preventScroll:!1}),window.addEventListener("click",n)}(e,t,o)},i=function(e,n){let o={},a=document.getElementById("city_name"),d=document.getElementById(n.replace(/city_id/g,"")+"province_id"),i=document.getElementById(n.replace(/city_id/g,"")+"country_id");if(!isNaN(parseInt(i.value))&&!isNaN(parseInt(d.value))&&i){o.name=a.value,o.country_id=parseInt(i.value),o.province_id=parseInt(d.value),!0===confirm("Are you sure you want to edit this record?")&&function(e,n){if(n)try{sendPostRequest("/api/v1.0/cities/update",n,function(n,o,a){if(!n||!n[0])return t("Error: 1");{let t=n[0];City.all.set(t.id,t);let o=$("select[data-type='city']");City.id=t.id,o.each(function(e,n){var o=new Option(t.name,t.id,!1,!1);$(n).append(o).trigger("change")}),$(e).val(t.id).trigger("change"),City.close(),toastr.success("City: "+t.id+" updated")}})}catch(e){Console.log(e),t("Error: Validating City")}else Console.log("Error: Missing Data"),t("Error: Missing Data")}(e,remove_nulls(o))}},l=function(e){City.all=new Map,e&&$.each(e,function(e,t){let n=o(t);City.all.set(n.id,n)})},r=function(e){!function(e){e&&e.dropdowns&&$.each(e.dropdowns,function(e,t){let n=document.getElementById(t);n&&$(n).select2({language:{searching:function(){}},escapeMarkup:function(e){return e}}).on("select2:open",function(e){let o=document.querySelectorAll("[aria-controls='select2-"+t+"-results']");if(o[0]){let e=o[0];if($(e).attr("id",t+"_search"),!document.getElementById("filter_city_add_icon")){let o=document.createElement("i");o.classList="select-add-option fas fa-plus filter_city_add",o.id="filter_city_add_icon",o.addEventListener("click",o=>{let a=e.value;$(n).select2("close"),City.add(this,a,t)}),e.after(o)}$(".filter_city_add").hide(),e&&e.addEventListener("keyup",t=>{""!==e.value?$(".filter_city_add").show():$(".filter_city_add").hide()})}}).on("change",function(){$(this).attr("id").replace("city","city")})})}(e)};return{id:null,detail:{id:null,province_id:null,country_id:null,created_by:null,modified_by:null,sort_order:null,name:null,enabled:null,date_created:null,date_modified:null,note:null},all:[],close:function(){!function(){let e=document.getElementById("form_new_city");e&&(e.parentNode.removeChild(e),window.removeEventListener("click",n))}()},save:function(e,t){i(e,t)},get:function(e,t,n){a(e,t,n)},add:function(e,t,n){d(e,t,n)},set_detail:function(e){o(e)},init:function(e){r(e)}}}(),Province=function(){"use strict";const e="form-new-province",t="form_new_province";let n=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4;const o=function(e){toastr.error(e),Console.log(e)},a=t=>{$(t.target).parents("div."+e)[0]||t.target.className.includes("select-add-option")||Province.close()},d=function(e){let t=i(),o=null;return e&&(o=validInt(e.id),t={id:validInt(e.id),name:e.name?e.name:null,sort_order:e.sort_order?e.sort_order:9999999,country_id:validInt(e.country_id),iso2:e.iso2?e.iso2:null,iso3:e.iso3?e.iso3:null,enabled:e.enabled?e.enabled:1,date_created:e.date_created?e.date_created:formatDateMySQL(),created_by:e.created_by?e.created_by:n,date_modified:e.date_modified?e.date_modified:formatDateMySQL(),modified_by:e.modified_by?e.modified_by:n,note:e.note?e.note:null}),Province.id=o,Province.detail=t,t},i=function(){return{id:null,name:null,sort_order:9999999,iso2:null,iso3:null,enabled:1,note:null,created_by:n,modified_by:n,date_created:formatDateMySQL(),date_modified:formatDateMySQL()}},l=function(){let e=document.getElementById(t);e&&(e.parentNode.removeChild(e),window.removeEventListener("click",a))},r=function(e,t){if(Province.all=new Map,!t)return;let n="";if(null!==Province.id&&(n=Province.id),!e)return $(t).BuildDropDown({data:Array.from(Province.all.values()),title:"Province",id_field:"id",text_field:"name",first_selectable:!1}),void $(t).val("").trigger("change");!function(e,t){if(!e)return o("Error Loading Province- Missing Data");try{sendGetRequest("/api/v1.0/provinces",e,function(e,n,a){return e?t(e):o("Oops: 1")})}catch(e){return Console.log(e),o("Error Validating Province")}}({country_id:e},function(e){e&&(c(e),$(t).BuildDropDown({data:Array.from(Province.all.values()),title:"Province",id_field:"id",text_field:"name",first_selectable:!1}),$(t).val(n).trigger("change"))})},c=function(e){Province.all=new Map,e&&$.each(e,function(e,t){let n=d(t);Province.all.set(n.id,n)})},s=function(n,o,d){n&&function(n,o,d){let i=$(n).attr("id"),r=$(n).parents("div.row"),c="";if(o&&(c=o),!i||!r[0])return;if(document.getElementById(t))return;let s=document.createElement("div"),u=document.createElement("h5"),_=document.createElement("div"),m=document.createElement("div"),p=document.createElement("div"),y=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div"),v=document.createElement("div"),b=document.createElement("div"),h=document.createElement("div"),I=document.createElement("div"),E=document.createElement("div"),C=document.createElement("div"),B=document.createElement("div"),w=document.createElement("div"),k=document.createElement("input"),x=document.createElement("label"),L=document.createElement("input"),M=document.createElement("label"),S=document.createElement("input"),D=document.createElement("label"),N=document.createElement("button"),T=document.createElement("button");s.id=t,s.classList=["card card-body m-3 "+e],u.classList="card-title",u.innerText="Province Details",k.id="province_name",k.name="province_name",k.type="text",k.classList=["form-control "+e],x.htmlFor="province_name",x.innerHTML="Name:",C.id="province_name-error",L.id="province_iso2",L.name="province_iso2",L.type="text",L.maxLength=2,L.classList=["form-control "+e],M.htmlFor="province_iso2",M.innerHTML="ISO2:",B.id="province_iso2-error",S.id="province_iso3",S.name="province_iso3",S.type="text",S.maxLength=3,S.classList=["form-control "+e],D.htmlFor="province_iso3",D.innerHTML="ISO3:",w.id="province_iso3-error",N.classList=["btn btn-primary btn-sm waves-effect waves-light"],N.innerText="save",N.type="button",N.addEventListener("click",e=>{Province.save(n,d)}),T.classList=["btn btn-outline-danger btn-sm waves-effect waves-light"],T.innerText="cancel",T.type="button",T.addEventListener("click",e=>{l()}),_.classList=["row"],m.classList=["row"],p.classList=["col-lg-3 mb-1"],y.classList=["col-lg-3 mb-1"],f.classList=["col-lg-3 mb-1"],g.classList=["col-lg-3 mb-1"],v.classList=["col-12 mb-1 text-right"],b.classList=["form-element"],h.classList=["form-element"],I.classList=["form-element"],E.classList=["form-element"],C.classList=["error w-100 text-center"],B.classList=["error w-100 text-center"],w.classList=["error w-100 text-center"],b.appendChild(x),b.appendChild(k),b.appendChild(C),p.appendChild(b),h.appendChild(M),h.appendChild(L),h.appendChild(B),y.appendChild(h),I.appendChild(D),I.appendChild(S),I.appendChild(w),f.appendChild(I),_.appendChild(p),_.appendChild(y),_.appendChild(f),_.appendChild(g),v.append(T),v.appendChild(N),m.appendChild(v),s.appendChild(u),s.appendChild(_),s.appendChild(m),r[0].appendChild(s),k.value=c,k.focus({preventScroll:!1}),window.addEventListener("click",a)}(n,o,d)},u=function(e,t){let n={},o=document.getElementById("province_name"),a=document.getElementById("province_iso2"),d=document.getElementById("province_iso3"),i=document.getElementById(t.replace(/province_id/g,"")+"country_id");isNaN(parseInt(i.value))||i&&function(){let e=document.getElementById("province_name"),t=document.getElementById("province_iso2"),n=document.getElementById("province_iso3"),o=!0;return e&&t&&n?(""===e.value?($(e).addClass("is-invalid"),$("#province_name-error").text("Required: Field is required").show(),o=!1):($(e).removeClass("is-invalid"),$("#province_name-error").text("").hide()),""===t.value?($(t).addClass("is-invalid"),$("#province_iso2-error").text("Required: Field is required").show(),o=!1):($(t).removeClass("is-invalid"),$("#province_iso2-error").text("").hide()),""===n.value?($(n).addClass("is-invalid"),$("#province_iso3-error").text("Required: Field is required").show(),o=!1):($(n).removeClass("is-invalid"),$("#province_iso3-error").text("").hide()),o):(handle_country_error("Error Processing Data"),!1)}()&&(n.name=o.value,n.iso2=a.value,n.iso3=d.value,n.country_id=parseInt(i.value),confirmDialog("Would you like to update?",t=>{t&&_(e,remove_nulls(n))}))},_=function(e,t){if(t)try{sendPostRequest("/api/v1.0/provinces/update",t,function(t,n,a){if(!t||!t[0])return o("Error: 1");{let n=t[0];Console.log("new_province",n),Province.all.set(n.id,n);let o=$("select[data-type='province']");Province.id=n.id,City.id=null,o.each(function(e,t){var o=new Option(n.name,n.id,!1,!1);$(t).append(o).trigger("change")}),$(e).val(n.id).trigger("change"),Province.close(),toastr.success("Province: "+n.id+" updated")}})}catch(e){Console.log(e),o("Error: Validating Province")}else Console.log("Error: Missing Data"),o("Error: Missing Data")},m=function(e){!function(e){e&&e.dropdowns&&$.each(e.dropdowns,function(e,t){let n=Country.id,o=(Province.id,document.getElementById(t));o&&$(o).select2({language:{searching:function(){}},escapeMarkup:function(e){return e}}).on("select2:open",function(e){let n=document.querySelectorAll("[aria-controls='select2-"+t+"-results']");if(n[0]){let e=n[0];if($(e).attr("id",t+"_search"),!document.getElementById("filter_province_add_icon")){let n=document.createElement("i");n.classList="select-add-option fas fa-plus filter_province_add",n.id="filter_province_add_icon",n.addEventListener("click",n=>{let a=e.value;$(o).select2("close"),Province.add(this,a,t)}),e.after(n)}$(".filter_province_add").hide(),e&&e.addEventListener("keyup",t=>{""!==e.value?$(".filter_province_add").show():$(".filter_province_add").hide()})}}).on("change",function(){let e=$(this).attr("id").replace("province","city"),t=$(this).attr("id").replace("province","country"),o=document.getElementById(e),a=document.getElementById(t);o&&a&&(n=parseInt(a.value),isNaN(parseInt(a.value))?(City.id=null,City.get(null,null,o)):isNaN(parseInt($(this).val()))?(City.id=null,City.get(n,null,o),City.id):City.get(n,parseInt($(this).val()),o)),City.id=null,Province.id=null})})}(e)};return{detail:{},all:new Map,id:null,set_detail:function(e){d(e)},update_select:function(e,t){},close:function(){l()},save:function(e,t){u(e,t)},get:function(e,t){r(e,t)},add:function(e,t,n){s(e,t,n)},init:function(e){m(e)}}}(),Country=function(){"use strict";const e="form_new_country";let t=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4;const n=function(e){toastr.error(e),Console.log(e)},o=e=>{$(e.target).parents("div.form-new-country")[0]||e.target.className.includes("select-add-option")||Country.close()},a=function(e){e&&e.dropdowns&&$.each(e.dropdowns,function(e,t){let n=document.getElementById(t);n&&$(n).select2({language:{searching:function(){}},escapeMarkup:function(e){return e}}).on("select2:open",function(e){let o=document.querySelectorAll("[aria-controls='select2-"+t+"-results']");if(o[0]){let e=o[0];if($(e).attr("id",t+"_search"),!document.getElementById("filter_country_add_icon")){let t=document.createElement("i");t.classList="select-add-option fas fa-plus filter_country_add",t.id="filter_country_add_icon",t.addEventListener("click",t=>{let o=e.value;$(n).select2("close"),Country.add(this,o)}),e.after(t)}$(".filter_country_add").hide(),e&&e.addEventListener("keyup",t=>{""!==e.value?$(".filter_country_add").show():$(".filter_country_add").hide()})}}).on("change",function(){isNaN(parseInt($(this).val()))||parseInt($(this).val());let e=$(this).attr("id").replace("country","province"),t=document.getElementById(e),n=$(this).attr("id").replace("country","city");document.getElementById(n);isNaN(parseInt($(this).val()))?Province.get(null,t):t&&Province.get(parseInt($(this).val()),t)})})},d=function(e){let n=i(),o=null;return e&&(o=validInt(e.id),n={id:validInt(e.id),name:e.name?e.name:null,sort_order:e.sort_order?e.sort_order:null,iso2:e.iso2?e.iso2:null,iso3:e.iso3?e.iso3:null,currency_id:validInt(e.currency_id),enabled:e.enabled?e.enabled:1,date_created:e.date_created?e.date_created:formatDateMySQL(),created_by:e.created_by?e.created_by:t,date_modified:e.date_modified?e.date_modified:formatDateMySQL(),modified_by:e.modified_by?e.modified_by:t,note:e.note?e.note:null}),Country.id=o,Country.detail=n,n},i=function(){return{id:null,name:null,sort_order:null,iso2:null,iso3:null,currency_id:null,enabled:1,note:null,created_by:t,modified_by:t,date_created:formatDateMySQL(),date_modified:formatDateMySQL()}},l=function(e){!function(e,t){if(!e)return n("Error Loading Country- Missing Data");try{$.ajax({type:"GET",url:"/api/v1.0/countries",data:e,async:!1}).done(function(e){return e?t(e):n("Oops: 1")})}catch(e){return Console.log(e),n("Error Validating Country")}}({},function(t){t&&(Country.all=t,a(e))})},r=function(t,n){t&&function(t,n){let a=$(t).attr("id"),d=$(t).parents("div.row"),i="";if(n&&(i=n),!a||!d[0])return;if(document.getElementById(e))return;let l=document.createElement("div"),r=document.createElement("h5"),c=document.createElement("div"),s=document.createElement("div"),u=document.createElement("div"),_=document.createElement("div"),m=document.createElement("div"),p=document.createElement("div"),y=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div"),v=document.createElement("div"),b=document.createElement("div"),h=document.createElement("div"),I=document.createElement("div"),E=document.createElement("div"),C=document.createElement("input"),B=document.createElement("label"),w=document.createElement("input"),k=document.createElement("label"),x=document.createElement("input"),L=document.createElement("label"),M=document.createElement("button"),S=document.createElement("button");r.classList="card-title",r.innerText="Country Details",l.id=e,l.classList=["card card-body m-3 form-new-country"],C.id="country_name",C.name="country_name",C.type="text",C.classList=["form-control "],B.htmlFor="country_name",B.innerHTML="Name:",h.id="country_name-error",w.id="country_iso2",w.name="country_iso2",w.type="text",w.maxLength=2,w.classList=["form-control "],k.htmlFor="country_iso2",k.innerHTML="ISO2:",I.id="country_iso2-error",x.id="country_iso3",x.name="country_iso3",x.type="text",x.maxLength=3,x.classList=["form-control "],L.htmlFor="country_iso3",L.innerHTML="ISO3:",E.id="country_iso3-error",M.classList=["btn btn-primary btn-sm waves-effect waves-light"],M.innerText="save",M.type="button",M.addEventListener("click",e=>{Country.save(t)}),S.classList=["btn btn-outline-danger btn-sm waves-effect waves-light"],S.innerText="cancel",S.type="button",S.addEventListener("click",e=>{Country.close()}),c.classList=["row"],s.classList=["row"],u.classList=["col-lg-3 mb-1"],_.classList=["col-lg-3 mb-1"],m.classList=["col-lg-3 mb-1"],p.classList=["col-lg-3 mb-1"],y.classList=["col-12 mb-1 text-right"],f.classList=["form-element"],g.classList=["form-element"],v.classList=["form-element"],b.classList=["form-element"],h.classList=["error w-100 text-center"],I.classList=["error w-100 text-center"],E.classList=["error w-100 text-center"],f.appendChild(B),f.appendChild(C),f.appendChild(h),u.appendChild(f),g.appendChild(k),g.appendChild(w),g.appendChild(I),_.appendChild(g),v.appendChild(L),v.appendChild(x),v.appendChild(E),m.appendChild(v),c.appendChild(u),c.appendChild(_),c.appendChild(m),c.appendChild(p),y.append(S),y.appendChild(M),s.appendChild(y),l.appendChild(r),l.appendChild(c),l.appendChild(s),d[0].appendChild(l),C.value=i,C.focus({preventScroll:!1}),window.addEventListener("click",o)}(t,n)},c=function(e){let t=document.getElementById("country_name"),o=document.getElementById("country_iso2"),a=document.getElementById("country_iso3");if(t&&o&&a){if(function(){let e=document.getElementById("country_name"),t=document.getElementById("country_iso2"),o=document.getElementById("country_iso3"),a=!0;return e&&t&&o?(""===e.value?($(e).addClass("is-invalid"),$("#country_name-error").text("Required: Field is required").show(),a=!1):($(e).removeClass("is-invalid"),$("#country_name-error").text("").hide()),""===t.value?($(t).addClass("is-invalid"),$("#country_iso2-error").text("Required: Field is required").show(),a=!1):($(t).removeClass("is-invalid"),$("#country_iso2-error").text("").hide()),""===o.value?($(o).addClass("is-invalid"),$("#country_iso3-error").text("Required: Field is required").show(),a=!1):($(o).removeClass("is-invalid"),$("#country_iso3-error").text("").hide()),a):(n("Error Processing Data"),!1)}()){let d={};d.name=""!==t.value?t.value:null,d.iso2=""!==o.value?o.value:null,d.iso3=""!==a.value?a.value:null,confirmDialog("Would you like to update?",t=>{t&&function(e,t){if(t)try{sendPostRequest("/api/v1.0/countries/update",t,function(t,o,a){if(!t||!t[0])return n("Error: 1");{let n=t[0];Country.all.set(n.id,n),$("select[data-type='country']").each(function(e,t){var o=new Option(n.name,n.id,!1,!1);$(t).append(o).trigger("change")}),$(e).val(n.id).trigger("change"),Country.close(),toastr.success("Country: "+n.id+" updated")}})}catch(e){Console.log(e),n("Error: Validating Country")}else Console.log("Error: Missing Data"),n("Error: Missing Data")}(e,remove_nulls(d))})}}else toastr.error("Error: 2")};return{detail:{},all:new Map,close:function(){!function(){let t=document.getElementById(e);t&&(t.parentNode.removeChild(t),window.removeEventListener("click",o))}()},add:function(e,t){r(e,t)},save:function(e){c(e)},set:function(e){set(e)},set_detail:function(e){d(e)},load_all:function(e){!function(e){Country.all=new Map,e&&$.each(e,function(e,t){let n=d(t);Country.all.set(n.id,n)})}(e)},get:function(e){l(e)},init:function(e){!function(e){a(e)}(e)}}}(),Location=function(){"use strict";const e=document.getElementById("form_edit_location"),t=document.getElementById("form_location_details"),n=document.getElementById("location_types_id"),o=document.getElementById("location_name_filter"),a=document.getElementById("location_city_id"),d=document.getElementById("location_country_id"),i=document.getElementById("location_province_id"),l=document.getElementById("location_id"),r=document.getElementById("location_street_1"),c=document.getElementById("location_street_2"),s=document.getElementById("location_zipcode"),u=document.getElementById("location_name"),_=document.getElementById("location_enabled"),m=(document.getElementById("temp_location_id"),document.getElementById("button_clear_form_edit_location")),p=(document.getElementById("button_close_location_edit"),document.getElementById("button_submit_form_edit_location")),y=document.getElementById("button_edit_location"),f=(document.getElementById("button_add_location_edit"),document.getElementById("button_close_edit_location_form")),g=document.getElementById("form_edit_location_filter"),v=document.getElementById("location_name_filter_id"),b={groups:{locationGroup:"location_name_filter location_name_filter_id"},rules:{location_name_filter:{required:!0},location_name_filter_id:{required:!0,digits:!0}},messages:{location_name_filter:{required:"Field Required"},location_name_filter_id:{required:"Field Required",digits:"invalid"}}},h={rules:{location_types_id:{required:!0},location_city_id:{required:!0,digits:!0},location_country_id:{required:!0,digits:!0},location_province_id:{required:!0,digits:!0},location_name:{required:!0}},messages:{location_types_id:{required:"Field Required"},location_city_id:{required:"Field Required",digits:"invalid"},location_country_id:{required:"Field Required",digits:"invalid"},location_province_id:{required:"Field Required",digits:"invalid"},location_id:{required:"Field Required",digits:"invalid"},location_name:{required:"Field Required"}}},I=document.getElementById("form_product_edit_location"),E=document.getElementById("button_edit_product_location"),C=document.getElementById("button_clear_form_edit_product_location"),B=document.getElementById("button_submit_form_edit_product_location"),w=document.getElementById("button_close_edit_product_location_form"),k=document.getElementById("product_location_search"),x=document.getElementById("card_product_edit_location");let L,M,S={},D=!1,N=!1,T="medium",q=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4;$('a[data-toggle="tab"]').on("hide.bs.tab",function(e){W()});const P=function(){Console.log("Location.clear_product_location_form()"),l.value="",n.value="",u.value="",r.value="",c.value="",s.value="",$(d).val("").trigger("change")},R=function(e){Console.log("Location.populate_product_location_form(location)",e),P();let t={},o={},a={},i={};if(e){k.value=e.display_medium?e.display_medium:"",u.value=e.name,$(l).val(e.id).trigger("change"),r.value=e.street_1,c.value=e.street_2,s.value=e.zipcode;let _="";e.type&&(_=(i=e.type).id),$(n).val(_),e.country&&(t=e.country,Country.id=t.id?t.id.toString():null),e.province&&(o=e.province,Province.id=o.id?o.id.toString():null),e.city&&(a=e.city,City.id=a.id?a.id:null),$(d).val(t.id?t.id:"").trigger("change")}},Q=function(e){P(),$(x).hide()},A=function(e){Console.log("Location.load_product_location_form(location)",e),P(),R(e),$(x).show()};$(B).on("click",function(){A()}),$(E).on("click",function(){Location.detail&&A(Location.detail)}),$(B).on("click",function(){}),$(C).on("click",function(){Q()}),$(w).on("click",function(){Q()}),$(k).on("click",function(){$(this).select()}).on("change",function(){N=!1,setTimeout(function(){let e=o.value;Console.log("location_name",e)},200)}).on("search",function(){N=!1}).autocomplete({serviceUrl:"/api/v1.0/autocomplete/locations",minChars:2,cache:!1,dataType:"json",triggerSelectOnValidInput:!1,paramName:"st",params:{default_display:T},onSelect:function(e){e&&e.data&&(N=!0,Console.log("suggestion",e))},onSearchComplete:function(e,t){}}),$(f).on("click",function(){z(),J(S),o.value=S.display_medium,$(l).val(S.id).trigger("change"),W()}),$(m).on("click",function(){z(),J()}),$(p).on("click",function(){X()}),$(y).on("click",function(){l.value,G()}),$("input[name='location_display']").on("change",function(){let e=$("input[name='location_display']:checked").val();Console.log("selected_value",e),T=e,F(),null!==Location.detail["display_"+e]&&(o.value=Location.detail["display_"+e])}),$(u).on("change",function(){setTimeout(function(){let e=u.value;V(e)},200)}),$(l).on("change",function(){$(v).val($(l).val())});const F=function(){$(o).on("click",function(){$(this).select()}).on("change",function(){setTimeout(function(){let e=o.value;!1===N&&(""===o.value?(o.value="",$(l).val("").trigger("change"),z()):j(e))},200)}).on("search",function(){N=!1,$(l).val("").trigger("change"),o.value="",D=!0,Y(),z(),J()}).autocomplete({serviceUrl:"/api/v1.0/autocomplete/locations",minChars:2,cache:!1,dataType:"json",triggerSelectOnValidInput:!1,paramName:"st",params:{default_display:T},onSelect:function(t){if(t&&t.data&&t.data.country&&t.data.province&&t.data.city){N=!0,z();let e=t.data;Location.detail=e,S=e,J(e)}e&&clear_validation(e)},onSearchComplete:function(e,t){}})},O=function(e){toastr.error(e)},V=function(e){if(e&&""!==e){H({name:e,default_display:T},function(t){if(t&&t[0])if(confirm(`Location: ${e} all ready exists. Would you like to use it?`)){let e=t[0];z(),J(e)}else z(),J()})}},j=function(e){if(e&&""!==e){H({name:e,default_display:T},function(t){if(t&&t[0]){let e=t[0];N=!0,z(),J(e)}else N=!1,confirmDialog(`Location: ${e} does not exist. Would you like to create it?`,t=>{t?U(e):(z(),J(S),W())})})}},U=function(e){!1===N&&e&&(z(),J(),G(),u.value=e,u.disabled=!0)},H=function(e,t){if(!e)return O("Error Loading Location- Missing Data");try{sendGetRequest("/api/v1.0/locations/validate",e,function(e,n,o){return e?t(e):O("Oops: 1")})}catch(e){return Console.log(e),O("Error Validating Location")}},G=function(){!function(){let e=document.getElementsByName("location_display");$.each(e,function(e,t){t.disabled=!0}),o.disabled=!0,y.disabled=!0}(),$(t).show()},W=function(){if(!t)return;let e=Y(S);J(e),function(){let e=document.getElementsByName("location_display");$.each(e,function(e,t){t.disabled=!1}),o.disabled=!1,y.disabled=!1}(),$(t).hide()},z=function(){u.disabled=!1,u.value="",o.value="",$(l).val("").trigger("change"),n.value="",r.value="",c.value="",s.value="",$(d).val("").trigger("change"),document.getElementById("location_display_medium").checked=!0},J=function(e){let t={},a={},i={},m={};if(e){o.value=e.display_medium?e.display_medium:"",_.checked=1===e.enabled,u.value=e.name,$(l).val(e.id).trigger("change"),r.value=e.street_1,c.value=e.street_2,s.value=e.zipcode;let p="";e.type&&(p=(m=e.type).id),$(n).val(p),e.country&&(t=e.country,Country.id=t.id?t.id.toString():null),e.province&&(a=e.province,Province.id=a.id?a.id.toString():null),e.city&&(i=e.city,City.id=i.id?i.id.toString():null),$(d).val(t.id?t.id:"").trigger("change")}},Y=function(e){let t={id:null,display_long:null,display_medium:null,display_short:null,location_types_id:null,name:null,street_1:null,street_2:null,zipcode:null,enabled:1,date_created:formatDateMySQL(),created_by:q,date_modified:formatDateMySQL(),modified_by:q,note:null,city:{id:null,name:null,sort_order:999,enabled:1,date_created:formatDateMySQL(),created_by:q,date_modified:formatDateMySQL(),modified_by:q,note:null},province:{created_by:q,date_created:formatDateMySQL(),date_modified:formatDateMySQL(),enabled:1,id:null,iso2:null,iso3:null,modified_by:q,name:null,name_long:null,note:null,sort_order:999},country:{created_by:q,date_created:formatDateMySQL(),date_modified:formatDateMySQL(),currency_id:null,enabled:1,id:null,iso2:null,iso3:null,modified_by:q,name:null,name_long:null,note:null,sort_order:999},type:{created_by:q,date_created:formatDateMySQL(),date_modified:formatDateMySQL(),enabled:1,icon:null,id:null,modified_by:q,name:null,note:null,sort_order:999}};S=t;let n={},o={},a={},d={};return e?(e.country&&(n=e.country),e.province&&(o=e.province),e.city&&(a=e.city),e.type&&(d=e.type)):e={},t.id=e.id?e.id:null,t.name=e.name?e.name:null,t.street_1=e.street_1?e.street_1:null,t.street_2=e.street_2?e.street_2:null,t.zipcode=e.zipcode?e.zipcode:null,t.display_long=e.display_long?e.display_long:null,t.display_medium=e.display_medium?e.display_medium:null,t.display_short=e.display_short?e.display_short:null,t.enabled=e.enabled?e.enabled:1,t.date_created=e.date_created?e.date_created:formatDateMySQL(),t.created_by=e.created_by?e.created_by:q,t.date_modified=e.date_modified?e.date_modified:formatDateMySQL(),t.modified_by=e.modified_by?e.modified_by:q,t.note=e.note?e.note:null,t.country={created_by:n.created_by?n.created_by:q,date_created:n.date_created?n.date_created:formatDateMySQL(),date_modified:n.date_modified?n.date_modified:formatDateMySQL(),currency_id:n.currency_id?n.currency_id:null,enabled:n.enabled?n.enabled:1,id:n.id?n.id:null,iso2:n.iso2?n.iso2:null,iso3:n.iso3?n.iso3:null,modified_by:n.modified_by?n.modified_by:q,name:n.name?n.name:null,name_long:n.name_long?n.name_long:null,note:n.note?n.note:null,sort_order:n.sort_order?n.sort_order:999},t.province={created_by:o.created_by?o.created_by:q,date_created:o.date_created?o.date_created:formatDateMySQL(),date_modified:o.date_modified?o.date_modified:formatDateMySQL(),enabled:o.enabled?o.enabled:1,id:o.id?o.id:null,iso2:o.iso2?o.iso2:null,iso3:o.iso3?o.iso3:null,modified_by:o.modified_by?o.modified_by:q,name:o.name?o.name:null,name_long:o.name_long?o.name_long:null,note:o.note?o.note:null,sort_order:o.sort_order?o.sort_order:999},t.city={created_by:a.created_by?a.created_by:q,date_created:a.date_created?a.date_created:formatDateMySQL(),date_modified:a.date_modified?a.date_modified:formatDateMySQL(),enabled:a.enabled?a.enabled:1,id:a.id?a.id:null,modified_by:a.modified_by?a.modified_by:q,name:a.name?a.name:null,note:a.note?a.note:null,sort_order:a.sort_order?a.sort_order:999},t.type={created_by:d.created_by?d.created_by:q,date_created:d.date_created?d.date_created:formatDateMySQL(),date_modified:d.date_modified?d.date_modified:formatDateMySQL(),enabled:d.enabled?d.enabled:1,icon:d.icon?d.icon:null,id:d.id?d.id:null,modified_by:d.modified_by?d.modified_by:q,name:d.name?d.name:null,note:d.note?d.note:null,sort_order:d.sort_order?d.sort_order:999},Province.set_detail(t.province),Country.set_detail(t.country),City.set_detail(t.city),Location.detail=t,t},K=function(t){let n={};t&&(n=function(e){return Y(e)}(t),S=n),e&&(validator_init(h),L=$(e).validate(),validator_init(b),M=$(g).validate(),$(d).BuildDropDown({data:Array.from(Country.all.values()),title:"Country",id_field:"id",text_field:"name",first_selectable:!1}),$(i).BuildDropDown({data:Array.from(Province.all.values()),title:"Province",id_field:"id",text_field:"name",first_selectable:!1}),$(a).BuildDropDown({data:Array.from(City.all.values()),title:"City",id_field:"id",text_field:"name",first_selectable:!1}),Country.init({dropdowns:["location_country_id"]}),Province.init({dropdowns:["location_province_id"]}),City.init({dropdowns:["location_city_id"]}),z(),J(n),W()),I&&($(d).BuildDropDown({data:Array.from(Country.all.values()),title:"Country",id_field:"id",text_field:"name",first_selectable:!1}),$(i).BuildDropDown({data:Array.from(Province.all.values()),title:"Province",id_field:"id",text_field:"name",first_selectable:!1}),$(a).BuildDropDown({data:Array.from(City.all.values()),title:"City",id_field:"id",text_field:"name",first_selectable:!1}),Country.init({dropdowns:["location_country_id"]}),Province.init({dropdowns:["location_province_id"]}),City.init({dropdowns:["location_city_id"]}),Location.detail=n,R(n)),o&&F()},X=function(){$(e).valid()&&confirmDialog("Would you like to update?",e=>{e&&function(e,t){e&&sendPostRequest("/api/v1.0/locations/update",e,function(e,n,o){return e?t(e):O("Oops: 1")})}(Z(),function(e){let t;if(e&&e[0]){let n="medium";t=e[0],S=t;let a=document.getElementsByName("location_display");for(let e=0;e<a.length;e++)a[e].checked&&(n=a[e].value);l.value=t.id,o.value=t["display_"+n],W()}})})},Z=function(){return remove_nulls({id:isNaN(parseInt(l.value))?null:parseInt(l.value),city_id:isNaN(parseInt(a.value))?null:parseInt(a.value),province_id:isNaN(parseInt(i.value))?null:parseInt(i.value),country_id:isNaN(parseInt(i.value))?null:parseInt(d.value),location_types_id:isNaN(parseInt(n.value))?null:parseInt(n.value),name:u&&""!==u.value?u.value:null,street_1:r&&""!==r.value?r.value:null,street_2:c&&""!==c.value?c.value:null,zipcode:s&&""!==s.value?s.value:null,enabled:1,note:null})};return{validator:null,detail:{},all:new Map,types:new Map,get:function(e){},load_all:function(e){load_all(e)},save:function(e){X(e)},init:function(e){K(e)},populate_form:function(e){J(e)},set_detail:function(e){Console.log("location",e),Y(e)},build:function(){if($(g).valid())return Z()}}}(),Address=function(){"use strict";const e=document.getElementById("button_add_address_table"),t=document.getElementById("button_close_edit_address_form"),n=document.getElementById("button_clear_form_edit_address"),o=document.getElementById("button_submit_form_edit_address"),a=document.getElementById("form_edit_address"),d=document.getElementById("card_edit_address_form"),i=document.getElementById("table_address"),l=document.getElementById("address_id"),r=document.getElementById("company_id"),c=document.getElementById("address_enabled"),s=document.getElementById("address_street_1"),u=document.getElementById("address_street_2"),_=document.getElementById("address_street_3"),m=document.getElementById("address_country_id"),p=document.getElementById("address_types_id"),y=document.getElementById("address_province_id"),f=document.getElementById("address_city_id"),g=document.getElementById("address_postal_code"),v=document.getElementById("address_company_id"),b=document.getElementById("clear_address_table");let h,I=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4,E=$(i),C={},B={groups:{cityGroup:"address_country_id address_province_id address_city_id"},rules:{address_types_id:{required:!0},address_company_id:{required:!0},address_country_id:{required:!0},address_province_id:{required:!0},address_city_id:{required:!0}},messages:{address_company_id:{required:"Field Required"},address_types_id:{required:"Field Required"},address_country_id:{required:"Field Required"},address_province_id:{required:"Field Required"},address_city_id:{required:"Field Required"}}};$(e).on("click",function(){E.clearSelectedRows(),S(),N()}),$(n).on("click",function(){E.clearSelectedRows(),S()}),$(o).on("click",function(){let e=k();e&&confirmDialog("Would you like to update?",t=>{t&&w(e)})}),$(t).on("click",function(){E.clearSelectedRows(),S(),D()}),$(b).on("click",function(){Address.clearTable()});const w=function(e){e&&x(e,function(e){if(e&&e[0]){let t=e[0],n=P(t);Address.all.get(n.id)?E.updateRow(n):E.insertRow(n),Address.all.set(n.id,n),E.clearSelectedRows(),S(),D(),toastr.success("Address Updated")}})},k=function(){if(L()){let e={company_id:isNaN(parseInt(v.value))?null:parseInt(v.value),street_1:""!==s.value?s.value:null,street_2:""!==u.value?u.value:null,street_3:""!==_.value?_.value:null,postal_code:""!==g.value?g.value:null,country_id:isNaN(m.value)?null:parseInt(m.value),province_id:isNaN(y.value)?null:parseInt(y.value),city_id:isNaN(f.value)?null:parseInt(f.value),address_types_id:toNumbers(getListOfIds($(p).val())),enabled:!0===c.checked?1:0,id:isNaN(parseInt(l.value))?null:parseInt(l.value)};return remove_nulls(e)}},x=function(e,t){e&&sendPostRequest("/api/v1.0/addresses/update",e,function(e,n,o){return e?t(e):M("Oops: 1")})},L=function(){return $(a).valid()},M=function(e){toastr.error(e)},S=function(){l.value="",c.checked=!0,s.value="",u.value="",_.value="",g.value="",$(p).val([]),$(m).val("").trigger("change")},D=function(){d&&$(d).hide()},N=function(e){d&&(l.value="",v.value=r.value,$(p).val([]),c.checked=!0,s.value="",u.value="",_.value="",m.value="",y.value="",f.value="",g.value="",function(e){e&&(l.value=e.id?e.id:null,v.value=e.company_id?e.company_id:null,$(p).val(e.address_types_id?e.address_types_id:[]),c.checked=1===e.enabled,s.value=e.street_1?e.street_1:null,u.value=e.street_2?e.street_2:null,_.value=e.street_3?e.street_3:null,g.value=e.postal_code?e.postal_code:null,Province.id=e.province.id,Country.id=e.country.id,City.id=e.city.id,$(m).val(e.country.id?e.country.id:"").trigger("change"))}(e),$(d).show())},T=function(e){if(Address.all=new Map,!e)return;let t,n=0;$.each(e,function(e,o){let a=P(o);0===n&&(t=a),Address.all.set(a.id,a),E.insertRow(a),n++}),i&&(t&&E.loadRow(t),E.clearSelectedRows()),d&&(S(),D())},q=function(e){i&&($.fn.DataTable.isDataTable(i)||(E=$(i).table({table_type:"display_list",data:Array.from(Address.all.values()),columnDefs:[{title:"ID",targets:0,data:"id",render:function(e,t,n,o){return e}},{title:"Address",targets:1,data:"medium_address_formatted",render:function(e,t,n,o){return e}},{title:"Types",targets:2,data:"formatted_types",render:function(e,t,n,o){return e}}],rowClick:Address.navigate}))),e&&T(e),a&&(validator_init(B),h=$(a).validate(),$(m).BuildDropDown({data:Array.from(Country.all.values()),title:"Country",id_field:"id",text_field:"name",first_selectable:!1}),$(y).BuildDropDown({data:[],title:"Province",id_field:"id",text_field:"name",first_selectable:!1}),$(f).BuildDropDown({data:[],title:"City",id_field:"id",text_field:"name",first_selectable:!1}),Country.init({dropdowns:["address_country_id"]}),Province.init({dropdowns:["address_province_id"]}),City.init({dropdowns:["address_city_id"]}))},P=function(e){let t={id:null,company_id:null,street_1:null,street_2:null,street_3:null,postal_code:null,enabled:1,address_types_id:[],date_created:formatDateMySQL(),created_by:parseInt(I),date_modified:formatDateMySQL(),modified_by:parseInt(I),note:null,short_address_formatted:null,medium_address_formatted:null,long_address_formatted:null,country:{id:null,name:null,iso2:null,iso3:null,currency_id:null,sort_order:999,enabled:1,date_created:formatDateMySQL(),created_by:parseInt(I),date_modified:formatDateMySQL(),modified_by:parseInt(I),note:null},province:{id:null,country_id:null,name:null,iso2:null,iso3:null,sort_order:999,enabled:1,date_created:formatDateMySQL(),created_by:parseInt(I),date_modified:formatDateMySQL(),modified_by:parseInt(I),note:null},city:{id:null,province_id:null,name:null,sort_order:999,enabled:1,date_created:formatDateMySQL(),created_by:parseInt(I),date_modified:formatDateMySQL(),modified_by:parseInt(I),note:null},formatted_types:""};return e&&(t.country={id:parseInt(e.country.id?e.country.id:null),name:e.country.name?e.country.name:null,name_long:e.country.name_long?e.country.name_long:null,currency_id:parseInt(e.country.currency_id?e.country.currency_id:null),iso2:e.country.iso2?e.country.iso2:null,iso3:e.country.iso3?e.country.iso3:null,sort_order:parseInt(e.country.sort_order?e.country.sort_order:999),enabled:parseInt(e.country.enabled?e.country.enabled:1),date_created:e.country.date_created?e.country.date_created:formatDateMySQL(),created_by:parseInt(e.country.created_by?e.country.created_by:I),date_modified:e.country.date_modified?e.country.date_modified:formatDateMySQL(),modified_by:parseInt(e.country.modified_by?e.country.modified_by:I),note:e.country.note?e.country.note:null},t.province={id:parseInt(e.province.id?e.province.id:null),country_id:parseInt(e.country.id?e.country.id:null),name:e.province.name?e.province.name:null,iso2:e.province.iso2?e.province.iso2:null,iso3:e.province.iso3?e.province.iso3:null,sort_order:parseInt(e.province.sort_order?e.province.sort_order:999),enabled:parseInt(e.province.enabled?e.province.enabled:1),date_created:e.province.date_created?e.province.date_created:formatDateMySQL(),created_by:parseInt(e.province.created_by?e.province.created_by:I),date_modified:e.province.date_modified?e.province.date_modified:formatDateMySQL(),modified_by:parseInt(e.province.modified_by?e.province.modified_by:I),note:e.province.note?e.province.note:null},t.city={id:parseInt(e.city.id?e.city.id:null),province_id:parseInt(e.province.id?e.province.id:null),name:e.city.name?e.city.name:null,sort_order:parseInt(e.city.sort_order?e.city.sort_order:999),enabled:parseInt(e.city.enabled?e.city.enabled:1),date_created:e.city.date_created?e.city.date_created:formatDateMySQL(),created_by:parseInt(e.city.created_by?e.city.created_by:I),date_modified:e.city.date_modified?e.city.date_modified:formatDateMySQL(),modified_by:parseInt(e.city.modified_by?e.city.modified_by:I),note:e.city.note?e.city.note:null},t.id=parseInt(e.id?e.id:null),t.company_id=parseInt(e.company_id?e.company_id:null),t.address_types_id=getListOfIds(e.address_types_id),t.short_address_formatted=e.short_address_formatted?e.short_address_formatted:null,t.medium_address_formatted=e.medium_address_formatted?e.medium_address_formatted:null,t.long_address_formatted=e.long_address_formatted?e.long_address_formatted:null,t.street_1=e.street_1?e.street_1:null,t.street_2=e.street_2?e.street_2:null,t.street_3=e.street_3?e.street_3:null,t.postal_code=e.postal_code?e.postal_code:null,t.enabled=parseInt(e.enabled?e.enabled:1),t.date_created=e.date_created?e.date_created:formatDateMySQL(),t.created_by=parseInt(e.created_by?e.created_by:I),t.date_modified=e.date_modified?e.date_modified:formatDateMySQL(),t.modified_by=parseInt(e.modified_by?e.modified_by:I),t.note=e.note?e.note:null,t.formatted_types=e.formatted_types?e.formatted_types:""),C=t,Address.detail=t,t},R=function(){let e=Array.from(Address.all.values());$.each(e,function(e,t){E.deleteRow(t)}),Address.all=new Map},Q=function(e){e&&function(e,t){if(!e)return M("Error Loading Company- Missing Data");try{sendGetRequest("/api/v1.0/addresses",e,function(e,n,o){return e?t(e):M("Oops: 1")})}catch(e){return Console.log(e),M("Error Validating Company")}}({company_id:e},function(e){if(e){let t=e;R(),function(e){if(i){let t;Address.all=new Map;let n=0;$.each(e,function(e,o){0===n&&(t=o),o.address_types_id=getListOfIds(o.address_types_id),Address.all.set(o.id,o),E.insertRow(o),n++}),i&&(t&&E.loadRow(t),E.clearSelectedRows())}}(t)}})};return{validator:null,detail:{},all:new Map,get_by_company_id:function(e){Q(e)},get:function(e){},navigate:function(e){!function(e){e&&N(e)}(e)},load_all:function(e){T(e)},save:function(e){w(e)},clearTable:function(){R()},init:function(e){q(e)}}}(),Register=function(){"use strict";return{init:function(e){}}}();$.fn.ColorScheme=function(e){Console.log("Test",Types.color_scheme)};const AirportTypes=function(){"use strict";document.getElementById("input_airport_types_id"),document.getElementById("input_airport_types_name"),document.getElementById("input_airport_types_sort_order"),document.getElementById("input_airport_types_enabled"),document.getElementById("input_airport_types_date_created"),document.getElementById("input_airport_types_created_by"),document.getElementById("input_airport_types_date_modified"),document.getElementById("input_airport_types_modified_by"),document.getElementById("input_airport_types_note");let e=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4;const t=function(t){let n={id:null,name:null,sort_order:null,enabled:1,date_created:formatDateMySQL(),created_by:e,date_modified:formatDateMySQL(),modified_by:e,note:null};return t&&(n.id=t.id?t.id:null,n.name=t.name?t.name:null,n.sort_order=t.sort_order?t.sort_order:null,n.enabled=t.enabled?t.enabled:1,n.date_created=t.date_created?t.date_created:formatDateMySQL(),n.created_by=t.created_by?t.created_by:created_by,n.date_modified=t.date_modified?t.date_modified:formatDateMySQL(),n.modified_by=t.modified_by?t.modified_by:modified_by,n.note=t.note?t.note:null),AirportTypes.detail=n,n};return{validator:null,detail:{},all:new Map,get:function(e){},load_all:function(e){var n;n=e,AirportTypes.all=new Map,n&&($.each(n,function(e,n){let o=t(n);AirportTypes.all.set("id",o)}),Console.log(" AirportTypes.all",AirportTypes.all))},save:function(e){},init:function(){Console.log(" -- AirportTypes -- ",{})}}}(),Category=function(){"use strict";const e=document.getElementById("modal_product_category_id");document.getElementById("modal_new_product"),document.getElementById("input_category_last_update"),document.getElementById("input_category_id"),document.getElementById("input_category_pricing_strategy_types_id"),document.getElementById("input_category_color_scheme_id"),document.getElementById("input_category_icon"),document.getElementById("input_category_view_product_index"),document.getElementById("input_category_view_product_index_filter"),document.getElementById("input_category_view_product_index_search"),document.getElementById("input_category_view_product_edit"),document.getElementById("input_category_view_product_package_edit"),document.getElementById("input_category_view_product_package_index"),document.getElementById("input_category_all_day"),document.getElementById("input_category_overlap"),document.getElementById("input_category_editable"),document.getElementById("input_category_duration_editable"),document.getElementById("input_category_start_editable"),document.getElementById("input_category_display"),document.getElementById("input_category_sort_order"),document.getElementById("input_category_enabled"),document.getElementById("input_category_date_created"),document.getElementById("input_category_created_by"),document.getElementById("input_category_date_modified"),document.getElementById("input_category_modified_by"),document.getElementById("input_category_note");let t=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4;$(e).on("change",function(){let e=$(this).val();c(e)});const n=document.getElementById("modal_product_name"),o=document.getElementById("modal_product_sku"),a=document.getElementById("modal_product_provider_name"),d=document.getElementById("modal_product_vendor_name"),i=(document.getElementById("modal_product_provider_id"),document.getElementById("modal_product_vendor_id"),document.getElementById("modal_product_rating_types_id")),l=document.getElementById("modal_product_currency_id"),r=document.getElementById("modal_product_pricing_strategies_types_id"),c=function(e){if(!e)return;e=parseInt(e),Product.reset_new_product_details(),Product.init_new_product_autocomplete(e);let t=Types.category.get(e);if(t&&(Product.attr1=t.attribute_id,Product.attr2=null,Product.attr3=null,Product.update_product_sku(),e&&!isNaN(parseInt(e))))switch(parseInt(e)){case 1:a.disabled=!1,d.disabled=!1,r.value="",i.disabled=!1,n.disabled=!1,l.disabled=!1,r.disabled=!1,Console.log("Hotels");break;case 2:r.value="2",i.value="",n.disabled=!1,l.disabled=!1,i.disabled=!0,Console.log("Flight");break;case 3:r.value="3",i.value="",n.disabled=!1,l.disabled=!1,i.disabled=!0,Console.log("Cars");break;case 4:r.value="2",i.value="",n.disabled=!1,l.disabled=!1,i.disabled=!0,Console.log("Rail");break;case 5:r.value="",i.value="",n.disabled=!1,l.disabled=!1,i.disabled=!1,Console.log("Transport");break;case 6:n.disabled=!1,l.disabled=!1,r.value="2",i.value="",i.disabled=!0,Console.log("Tours");break;case 7:n.disabled=!1,r.value="",i.value="",r.disabled=!1,i.disabled=!1,l.disabled=!1,Console.log("Cruises");break;case 8:r.value="",i.value="",i.disabled=!1,n.disabled=!1,l.disabled=!1,Console.log("Packages");break;case 9:n.disabled=!1,l.disabled=!1,i.disabled=!1,r.disabled=!1,r.value="",i.value="",Console.log("Other");break;default:n.disabled=!0,o.disabled=!0,i.disabled=!0,l.disabled=!0,r.disabled=!0,Console.log("Default")}},s=function(e){let n={category_id:1,name:null,last_update:null,id:null,pricing_strategy_types_id:null,color_scheme_id:null,icon:null,view_product_index:1,view_product_index_filter:1,view_product_index_search:1,view_product_edit:1,view_product_package_edit:1,view_product_package_index:1,all_day:1,overlap:1,editable:1,duration_editable:1,start_editable:1,display:null,sort_order:null,enabled:1,date_created:formatDateMySQL(),created_by:t,date_modified:formatDateMySQL(),modified_by:t,note:null};return e&&(n.id=e.id?e.id:null,n.name=e.name?e.name:null,n.last_update=e.last_update?e.last_update:null,n.id=e.id?e.id:null,n.pricing_strategy_types_id=e.pricing_strategy_types_id?e.pricing_strategy_types_id:null,n.color_scheme_id=e.color_scheme_id?e.color_scheme_id:null,n.name=e.name?e.name:null,n.icon=e.icon?e.icon:null,n.view_product_index=e.view_product_index?e.view_product_index:1,n.view_product_index_filter=e.view_product_index_filter?e.view_product_index_filter:1,n.view_product_index_search=e.view_product_index_search?e.view_product_index_search:1,n.view_product_edit=e.view_product_edit?e.view_product_edit:1,n.view_product_package_edit=e.view_product_package_edit?e.view_product_package_edit:1,n.view_product_package_index=e.view_product_package_index?e.view_product_package_index:1,n.all_day=e.all_day?e.all_day:1,n.overlap=e.overlap?e.overlap:1,n.editable=e.editable?e.editable:1,n.duration_editable=e.duration_editable?e.duration_editable:1,n.start_editable=e.start_editable?e.start_editable:1,n.display=e.display?e.display:null,n.sort_order=e.sort_order?e.sort_order:null,n.enabled=e.enabled?e.enabled:1,n.date_created=e.date_created?e.date_created:formatDateMySQL(),n.created_by=e.created_by?e.created_by:created_by,n.date_modified=e.date_modified?e.date_modified:formatDateMySQL(),n.modified_by=e.modified_by?e.modified_by:modified_by,n.note=e.note?e.note:null,n.seasons=e.seasons?e.seasons:[]),Category.detail=n,n},u=function(e){Category.all=new Map,e&&$.each(e,function(e,t){let n=s(t);Category.all.set(n.id,n)})};return{validator:null,detail:{},all:new Map,get:function(e){},load_all:function(e){u(e)},save:function(e){},init:function(e){!function(e){let t=[];e&&e.categories&&(t=e.categories),u(t)}(e)}}}(),ContactTypes=function(){"use strict";document.getElementById("input_contact_types_id"),document.getElementById("input_contact_types_name"),document.getElementById("input_contact_types_sort_order"),document.getElementById("input_contact_types_enabled"),document.getElementById("input_contact_types_date_created"),document.getElementById("input_contact_types_created_by"),document.getElementById("input_contact_types_date_modified"),document.getElementById("input_contact_types_modified_by"),document.getElementById("input_contact_types_note");let e=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4;const t=function(t){let n={id:null,name:null,sort_order:null,enabled:1,date_created:formatDateMySQL(),created_by:e,date_modified:formatDateMySQL(),modified_by:e,note:null};return t&&(n.id=t.id?t.id:null,n.name=t.name?t.name:null,n.sort_order=t.sort_order?t.sort_order:null,n.enabled=t.enabled?t.enabled:1,n.date_created=t.date_created?t.date_created:formatDateMySQL(),n.created_by=t.created_by?t.created_by:created_by,n.date_modified=t.date_modified?t.date_modified:formatDateMySQL(),n.modified_by=t.modified_by?t.modified_by:modified_by,n.note=t.note?t.note:null),ContactTypes.detail=n,n};return{validator:null,detail:{},all:new Map,get:function(e){},load_all:function(e){var n;n=e,ContactTypes.all=new Map,n&&($.each(n,function(e,n){let o=t(n);ContactTypes.all.set("id",o)}),Console.log(" ContactTypes.all",ContactTypes.all))},save:function(e){},init:function(){Console.log(" -- ContactTypes -- ",{})}}}(),Company=function(){"use strict";const e=document.getElementById("button_save_provider"),t=document.getElementById("form_edit_company"),n=(document.getElementById("company_enabled"),document.getElementById("company_name")),o=document.getElementById("company_phone_1"),a=document.getElementById("company_phone_2"),d=document.getElementById("company_fax"),i=document.getElementById("company_email"),l=document.getElementById("company_website"),r=document.getElementById("button_submit_form_edit_company"),c=document.getElementById("company_cover_image"),s=document.getElementById("address_company_id"),u=document.getElementById("company_id"),_=document.getElementById("contact_company_id"),m=document.getElementById("form_edit_company_block"),p=document.getElementById("button_edit_company_name"),y=document.getElementById("button_cancel_edit_company_name"),f=document.getElementById("button_close_edit_company_form"),g=document.getElementById("form_edit_vendor"),v=document.getElementById("form_edit_provider"),b=document.getElementById("vendor_name"),h=document.getElementsByClassName("vendor_company_id"),I=document.getElementById("provider_name"),E=document.getElementById("provider_company_id"),C=document.getElementById("company_keywords"),B=(document.getElementById("company_keywords"),document.getElementById("company_logo"),document.getElementById("company_description_long")),w=document.getElementById("company_description_short"),k=document.getElementById("button_clear_form_edit_company"),x=(document.getElementById("company_edit_table_filters"),{rules:{company_name:{required:!0},company_phone_1:{},company_phone_2:{},company_fax:{},company_email:{email:!0},company_website:{url:!0}},messages:{company_name:{required:"Field Required1"},company_email:{email:"Field Invalid"},company_website:{url:"Field Invalid"}}});let L,M,S=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4,D=!1,N={};$('a[data-toggle="tab"]').on("hide.bs.tab",function(e){H()}),$(y).on("click",function(){let e=j(N);T(e),H()}),$(p).on("click",function(){N=R(),U()}),$(k).on("click",function(){O()}),$(f).on("click",function(){H()}),$(r).on("click",function(){let e=Company.build();e&&confirmDialog("Would you like to update?",t=>{t&&F(e,function(e){if(e&&e[0]){let t=e[0],n=j(t);V=n,T(n),q(),H()}})})}),$(u).on("change",function(){s.value=u.value}),$(t).on("change",function(){G()});const T=function(e){$("#company_logo").dropify();$(u).val(e.id?e.id:"").trigger("change"),n.value=e.name?e.name:"",o.value=e.phone_1?e.phone_1:"",a.value=e.phone_2?e.phone_2:"",d.value=e.fax?e.fax:"",i.value=e.email?e.email:"",l.value=e.website?e.website:"",B.value=e.description_long?e.description_long:"",w.value=e.description_short?e.description_short:"";let t=e.keywords?e.keywords:"";L=$(C).BuildKeyword(t),I&&$(I).val(e.name?e.name:"").trigger("change"),b&&(b.value=e.name?e.name:null),E&&(E.value=e.id?e.id:null),h&&(h.value=e.id?e.id:null),_&&(_.value=e.id?e.id:null),s&&(s.value=e.id?e.id:null)},q=function(){$(n).on("change",function(){setTimeout(function(){let e=n.value;!1===D&&(""===e?(n.value="",u.value="",D=!1):Q(e))},200)}).on("search",function(){Company.reset_form(!0),v&&Provider.reset_form(),g&&Vendor.reset_form()}).on("click",function(e){"readonly"===$(this).attr("readonly")?e.preventDefault():$(this).select()}).autocomplete({serviceUrl:"/api/v1.0/autocomplete/companies",minChars:2,cache:!1,dataType:"json",triggerSelectOnValidInput:!1,paramName:"st",onSelect:function(e){if(!e.data)return;let t=e.data;D=!0,T(t),I?$(I).val(t.name).trigger("change"):$(b).val(t.name),E&&$(E).val(t.id),Address.get_by_company_id(t.id),Contact.getByCompanyId(t.id)}})},P=function(e){toastr.error(e)},R=function(){return remove_nulls({email:$(i).val(),enabled:1,fax:$(d).val(),id:isNaN(u.value)?null:parseInt(u.value),modified_by:S,cover_image:"/public/img/placeholder.jpg",description_short:w.value,description_long:B.value,keywords:L.build(),name:$(n).val(),note:null,phone_1:$(o).val(),phone_2:$(a).val(),status_id:10,website:$(l).val()})},Q=function(e){if(e&&""!==e){A({name:e},function(t){let o=null;t&&t[0]&&t[0]&&(o=t[0]),o?(O(!0),T(o),Address.get_by_company_id(o.id),Contact.getByCompanyId(o.id)):confirmDialog(`The company: ${e} does not exist exists. Would you like to create it?`,e=>{e&&F({name:n.value,status_id:10,enabled:1},function(e){e&&e[0]&&(o=e[0],N=o,O(!0),T(o),U())})})})}},A=function(e,t){if(!e)return P("Error Loading Company- Missing Data");try{sendGetRequest("/api/v1.0/companies/validate",e,function(e,n,o){return e?t(e):P("Oops: 1")})}catch(e){return Console.log(e),P("Error Validating Company")}},F=function(e,t){e&&sendPostRequest("/api/v1.0/companies/update",e,function(e,n,o){return e?t(e):P("Oops: 1")})},O=function(e){o.value="",a.value="",d.value="",i.value="",l.value="",e&&!0===e&&(I&&$(I).val("").trigger("change"),b&&$(b).val("").trigger("change"),$(u).val("").trigger("change"),n.value="",Address.clearTable(),Contact.clearTable())};let V={};const j=function(e){let t={created_by:S,date_created:formatDateMySQL(),date_modified:formatDateMySQL(),email:null,cover_image:"/public/img/placeholder.jpg",enabled:1,fax:null,id:null,modified_by:S,name:null,note:null,phone_1:null,phone_2:null,status_id:10,website:null,description_short:null,description_long:null,keywords:null,logo:null};return e&&(t.created_by=e.created_by?e.created_by:S,t.date_created=e.date_created?e.date_created:formatDateMySQL(),t.date_modified=e.date_modified?e.date_modified:formatDateMySQL(),t.email=e.email?e.email:null,t.cover_image=e.cover_image?e.cover_image:null,t.enabled=e.enabled?e.enabled:1,t.fax=e.fax?e.fax:null,t.id=e.id?e.id:null,t.modified_by=e.modified_by?e.modified_by:S,t.name=e.name?e.name:null,t.note=e.note?e.note:null,t.phone_1=e.phone_1?e.phone_1:null,t.phone_2=e.phone_2?e.phone_2:null,t.status_id=e.status_id?e.status_id:10,t.website=e.website?e.website:null,t.logo=e.logo?e.logo:"",t.keywords=e.keywords?e.keywords:"",t.description_long=e.description_long?e.description_long:"",t.description_short=e.description_short?e.description_short:""),Company.detail=t,t},U=function(){V=Company.build(),m&&($(m).show(),$(y).show(),$(p).hide(),$(n).attr("readonly",!0)),e&&($(e).attr("readonly",!0),e.disabled=!0)},H=function(){if(m){j(V);$(n).attr("readonly",!1),$(m).hide(),$(y).hide(),$(p).show(),q()}e&&($(e).attr("readonly",!1),e.disabled=!1)},G=function(){isNaN(parseInt(u.value))?(p.disabled=!0,$(c).attr("readonly",!0),$(o).attr("readonly",!0),$(a).attr("readonly",!0),$(d).attr("readonly",!0),$(i).attr("readonly",!0)):($(o).attr("readonly",!1),$(a).attr("readonly",!1),$(d).attr("readonly",!1),$(i).attr("readonly",!1),$(c).attr("readonly",!1),p.disabled=!1)};return{all:new Map,build:function(){if($(t).valid())return R()},validator:null,detail:{created_by:S,date_created:formatDateMySQL(),date_modified:formatDateMySQL(),email:null,enabled:1,fax:null,id:null,modified_by:S,name:null,note:null,phone_1:null,phone_2:null,status_id:10,website:null},add_to_company_list:function(e,t){return F(e,t)},company_exists:function(e){Q(e)},populate_form:function(e){T(e)},reset_form:function(e){O(e)},init:function(e){!function(e){let n=[];if(e){let t=j(e);n=e.images?e.images:[],T(t)}t&&(validator_init(x),M=$(t).validate(),q(),m&&H()),$("#companyImages").imageManager({id:"company_image_manager",images:n})}(e)}}}(),Contact=function(){"use strict";const e=document.getElementById("clear_contact_table"),t=document.getElementById("button_add_contact_table"),n=document.getElementById("button_clear_form_edit_contact"),o=document.getElementById("button_close_edit_contact_form"),a=document.getElementById("button_submit_form_edit_contact"),d=document.getElementById("company_id"),i=document.getElementById("contact_company_id"),l=document.getElementById("contact_id"),r=document.getElementById("contact_name_first"),c=document.getElementById("contact_name_last"),s=document.getElementById("contact_phone"),u=document.getElementById("contact_email"),_=document.getElementById("contact_enabled"),m=document.getElementById("contact_types_id"),p=document.getElementById("card_edit_contact_form"),y=document.getElementById("form_edit_contact"),f=document.getElementById("table_contact");document.getElementById("contact_date_created"),document.getElementById("contact_created_by"),document.getElementById("contact_date_modified"),document.getElementById("contact_modified_by"),document.getElementById("contact_note");let g,v=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4,b=$(f),h={rules:{contact_name_first:{required:!0},contact_name_last:{required:!0},contact_phone:{required:!0},contact_email:{required:!0},contact_types_id:{required:!0}},messages:{contact_name_first:{required:"Field Required"},contact_name_last:{required:"Field Required"},contact_phone:{required:"Field Required"},contact_email:{required:"Field Required"},contact_types_id:{required:"Field Required"}}};$(a).on("click",function(){I()&&confirmDialog("Would you like to update?",e=>{e&&E()})}),$(t).on("click",function(){b.clearSelectedRows(),w(),k()}),$(n).on("click",function(){b.clearSelectedRows(),w()}),$(o).on("click",function(){b.clearSelectedRows(),w(),x()}),$(e).on("click",function(){Contact.clearTable()});const I=function(){return $(y).valid()},E=function(){let e=function(){let e={name_first:r.value,name_last:c.value,email:u.value,phone:s.value,contact_types_id:toNumbers(getListOfIds($(m).val())),enabled:!0===_.checked?1:0,company_id:isNaN(i.value)?null:parseInt(i.value),id:isNaN(l.value)?null:parseInt(l.value)};return remove_nulls(e)}();e&&C(e,function(e){if(Console.log(e),e&&e[0]){let t=e[0],n=L(t);Contact.all.get(n.id)?b.updateRow(n):b.insertRow(n),Contact.all.set(n.id,n),toastr.success("Contact Updated")}})},C=function(e,t){e&&sendPostRequest("/api/v1.0/contacts/update",e,function(e,n,o){return e?t(e):B("Oops: 1")})},B=function(e){toastr.error(e)},w=function(){p&&(l.value="",r.value="",c.value="",s.value="",u.value="",_.checked=!0,$(m).val([]))},k=function(){p&&$(p).show()},x=function(){p&&$(p).hide()},L=function(e){let t={id:null,company_id:null,name_first:null,name_last:null,formatted_types:"",formatted_names:"",phone:null,email:null,enabled:1,date_created:formatDateMySQL(),created_by:v,date_modified:formatDateMySQL(),modified_by:v,note:null};return e&&(t.id=e.id?e.id:null,t.company_id=e.company_id?e.company_id:null,t.name_first=e.name_first?e.name_first:null,t.name_last=e.name_last?e.name_last:null,t.formatted_types=e.formatted_types?e.formatted_types:"",t.formatted_names=e.formatted_names?e.formatted_names:"",t.contact_types_id=getListOfIds(e.contact_types_id),t.phone=e.phone?e.phone:null,t.email=e.email?e.email:null,t.enabled=e.enabled?e.enabled:1,t.date_created=e.date_created?e.date_created:formatDateMySQL(),t.created_by=e.created_by?e.created_by:created_by,t.date_modified=e.date_modified?e.date_modified:formatDateMySQL(),t.modified_by=e.modified_by?e.modified_by:modified_by,t.note=e.note?e.note:null),Contact.detail=t,t},M=function(e){Contact.all=new Map,e&&($.each(e,function(e,t){let n=L(t);Contact.all.set(n.id,n),b.insertRow(n)}),e[0]&&b.loadRow(e[0]))},S=function(e){e&&function(e){w(),i.value=d.value,e&&(Console.log("contact",e),l.value=validInt(e.id),r.value=e.name_first?e.name_first:null,c.value=e.name_last?e.name_last:null,s.value=e.phone?e.phone:null,u.value=e.email?e.email:null,_.checked=!e.enabled||1===e.enabled,$(m).val(e.contact_types_id?e.contact_types_id:[])),k()}(e)},D=function(e){f&&f&&($.fn.DataTable.isDataTable(f)||(b=$(f).table({table_type:"display_list",data:Contact.all,columnDefs:[{title:"ID",targets:0,data:"id",render:function(e,t,n,o){return e}},{title:"Name",targets:1,data:"formatted_names",render:function(e,t,n,o){return e}},{title:"Types",targets:2,data:"formatted_types",render:function(e,t,n,o){return e}}],rowClick:Contact.navigate}))),e&&M(e),y&&(validator_init(h),g=$(y).validate()),x()},N=function(){let e=Array.from(Contact.all.values());$.each(e,function(e,t){b.deleteRow(t)}),Contact.all=new Map},T=function(e){e&&function(e,t){if(!e)return B("Error Loading Company- Missing Data");try{sendGetRequest("/api/v1.0/contacts",e,function(e,n,o){return e?t(e):B("Oops: 1")})}catch(e){return Console.log(e),B("Error Validating Company")}}({company_id:e},function(e){if(e){let t=e;N(),function(e){if(f){let t;Contact.all=new Map;let n=0;$.each(e,function(e,o){0===n&&(t=o),o.contact_types_id=getListOfIds(o.contact_types_id),Contact.all.set(o.id,o),b.insertRow(o),n++}),f&&(t&&b.loadRow(t),b.clearSelectedRows())}}(t)}})};return{validator:null,detail:{},all:new Map,getByCompanyId:function(e){T(e)},clearTable:function(){N()},navigate:function(e){S(e)},load_all:function(e){M(e)},save:function(e){E(e)},init:function(e){D(e)}}}(),Currency=function(){"use strict";document.getElementById("input_currency_id"),document.getElementById("input_currency_sort_order"),document.getElementById("input_currency_name"),document.getElementById("input_currency_iso"),document.getElementById("input_currency_minor_unit"),document.getElementById("input_currency_symbol"),document.getElementById("input_currency_enabled"),document.getElementById("input_currency_date_created"),document.getElementById("input_currency_created_by"),document.getElementById("input_currency_date_modified"),document.getElementById("input_currency_modified_by"),document.getElementById("input_currency_note");let e=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4;const t=function(t){let n={id:null,sort_order:null,name:null,iso:null,minor_unit:null,symbol:null,enabled:1,date_created:formatDateMySQL(),created_by:e,date_modified:formatDateMySQL(),modified_by:e,note:null};return t&&(n.id=t.id?t.id:null,n.sort_order=t.sort_order?t.sort_order:null,n.name=t.name?t.name:null,n.iso=t.iso?t.iso:null,n.minor_unit=t.minor_unit?t.minor_unit:null,n.symbol=t.symbol?t.symbol:null,n.enabled=t.enabled?t.enabled:1,n.date_created=t.date_created?t.date_created:formatDateMySQL(),n.created_by=t.created_by?t.created_by:created_by,n.date_modified=t.date_modified?t.date_modified:formatDateMySQL(),n.modified_by=t.modified_by?t.modified_by:modified_by,n.note=t.note?t.note:null),Currency.detail=n,n};return{validator:null,detail:{},all:new Map,get:function(e){},load_all:function(e){var n;n=e,Currency.all=new Map,n&&$.each(n,function(e,n){let o=t(n);Currency.all.set("id",o)})},save:function(e){},init:function(){}}}();Currency.init();const Vendor=function(){"use strict";const e=document.getElementById("panel_tab_contact"),t=document.getElementById("button_add_vendor_page_heading"),n=document.getElementById("vendor_index_table_add_button"),o=document.getElementById("vendor_company_id"),a=document.getElementById("form_edit_vendor"),d=document.getElementById("vendor_name"),i=document.getElementById("vendor_id"),l=document.getElementById("vendor_show_online"),r=document.getElementById("vendor_show_sales"),c=document.getElementById("vendor_show_ops"),s=document.getElementById("vendor_is_provider"),u=document.getElementById("vendor_sku"),_=document.getElementById("vendor_enabled"),m=document.getElementById("provider_edit"),p=(document.getElementById("provider_name"),document.getElementById("provider_company_id"),document.getElementById("company_id")),y=document.getElementById("button_submit_form_edit_vendor"),f=document.getElementById("table_vendor_index"),g=document.getElementById("form_vendor_add"),v=document.getElementById("modal_button_submit_add_vendor"),b=document.getElementById("modal_button_cancel_add_vendor"),h=document.getElementById("modal_new_vendor"),I=document.getElementById("vendor_modal_vendor_name"),E=document.getElementById("button_save_vendor"),C=document.getElementById("company_name"),B=document.getElementById("form_product_add"),w=document.getElementById("modal_product_vendor_id"),k=document.getElementById("modal_product_vendor_name"),x=document.getElementById("modal_product_provider_vendor_match"),L=document.getElementById("modal_product_provider_company_id"),M=document.getElementById("modal_product_vendor_company_id");let S,D,N=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4,T=!1,q={rules:{vendor_name:{required:!0}},messages:{vendor_name:{required:"Field Required"}}},P={rules:{vendor_modal_vendor_name:{required:!0}},messages:{vendor_modal_vendor_name:{required:"Field Required"}}},R=$(f);$(E).on("click",function(){let e=Company.build();Console.log("_button_save_vendor",e),Y()}),$(t).on("click",function(){F()}),$(n).on("click",function(){F()}),$(b).on("click",function(){A()}),$(v).on("click",function(){if(O()){let e={name:I.value};confirmDialog(`Vendor: ${name} will be added`,t=>{t&&V(e)})}}),$(I).on("change",function(){setTimeout(function(){let e=I.value;!1===T&&(""===e?(I.value="",T=!1):Q(e))},200)}).on("search",function(){}).on("click",function(e){"readonly"===$(this).attr("readonly")?e.preventDefault():$(this).select()}).autocomplete({serviceUrl:"/api/v1.0/autocomplete/vendors",minChars:2,cache:!1,dataType:"json",triggerSelectOnValidInput:!1,paramName:"st",onSelect:function(e){if(!e.data)return;let t=e.data;confirmDialog(`Vendor ${t.name} ALREADY exists. Would you like to load this record to edit?`,e=>{e?window.location.replace("/vendors/"+t.id):U()})}}),$(k).on("change",function(){setTimeout(function(){let e=k.value;T=!1,""===e?(w.value="",k.value="",M.value="",Product.attr3=null,Product.update_product_sku(),T=!1):Q(e)},200)}).on("search",function(){w.value="",k.value="",M.value="",x.checked=!1,Product.attr3=null,Product.update_product_sku(),T=!1}).on("click",function(e){"readonly"===$(this).attr("readonly")?e.preventDefault():$(this).select()}).autocomplete({serviceUrl:"/api/v1.0/autocomplete/vendors",minChars:2,cache:!1,dataType:"json",triggerSelectOnValidInput:!1,paramName:"st",onSelect:function(e){if(!e||!e.data)return;Console.log("suggestion.data",e.data);e.data;if(B){let t=isNaN(parseInt(L.value))?null:parseInt(L.value);w.value=e.data.id,k.value=e.data.name,M.value=e.data.company_id,Product.attr3=e.data.sku,Product.update_product_sku(),x.checked=parseInt(e.data.company_id)===t}T=!0}}),$(p).on("change",function(){$(o).val(p.value)}),$(y).on("click",function(){Y()});const Q=function(e){if(Console.log("vendor_exists()",e),e&&""!==e){let t={name:e};Console.log("dataToSend",t),G(t,function(e){let t;if(Console.log("fetch_vendor_by_name()",e),e&&e.length>0)t=e,e.length>0&&e[0]&&(t=e[0]);else{Console.log("Vendor Does Not Exist"),w.value="",M.value="",Product.attr3=null,Product.update_product_sku();let e=k.value;""!==e&&confirmDialog(`Vendor ${e} does not exists. Would you like to create this`,e=>{if(e){let e={name:k.value};V(e)}else k.value=""})}t&&(Console.log("Vendor Exists",t),I&&confirmDialog(`Vendor ${t.name} ALREADY exists. Would you like to load this record to edit?`,e=>{e&&window.location.replace("/vendors/"+t.id)}),B&&(w.value=t.id?t.id:"",M.value=t.company_id?t.company_id:"",Product.attr3=t.sku?t.sku:null,Product.update_product_sku()))})}},A=function(){$(h).modal("hide")},F=function(){$(I).val(""),$(h).modal("show")},O=function(){return!!g&&$(g).valid()},V=function(e){e&&j(e,function(t){if(t)if(Console.log("data 1",t),t[0]){Console.log("data[0] 1",t[0]);let e=t[0];e.id?(B&&(Console.log("_form_product_add: details",e),M.value=e.company_id?e.company_id:"",w.value=e.id?e.id:"",x.checked=M.value===L.value,Product.attr3=e.sku?e.sku:null,Product.update_product_sku()),g&&window.location.replace("/vendors/"+e.id)):Console.log("details 1",e)}else Console.log("details 2",t);else Console.log("details 3",e)})},j=function(e,t){if(e)try{sendPostRequest("/api/v1.0/vendors/add",e,function(e,n,o){return e?t(e):H("Oops: 1")})}catch(e){Console.log(e)}},U=function(){I.value=""},H=function(e){toastr.error(e)},G=function(e,t){if(!e)return H("Error Loading Company- Missing Data");try{sendGetRequest("/api/v1.0/vendors/validate",e,function(e,n,o){return e?t(e):H("Oops: 1")})}catch(e){return Console.log(e),H("Error Validating Company")}},W=function(){return{id:null,name:null,company_id:null,status_id:1,show_online:1,show_sales:1,show_ops:1,is_provider:1,sku:null,enabled:1,date_created:formatDateMySQL(),created_by:N,date_modified:formatDateMySQL(),modified_by:N,note:null,company:{},addresses:[],contacts:[]}},z=function(e){let t=W();return t.id=e.id?e.id:null,t.name=e.name?e.name:null,t.status_id=e.status_id?e.status_id:null,t.show_online=e.show_online,t.show_sales=e.show_sales,t.show_ops=e.show_ops,t.is_provider=e.is_provider,t.sku=e.sku?e.sku:null,t.enabled=e.enabled,t.date_created=e.date_created?e.date_created:formatDateMySQL(),t.created_by=e.created_by?e.created_by:created_by,t.date_modified=e.date_modified?e.date_modified:formatDateMySQL(),t.modified_by=e.modified_by?e.modified_by:modified_by,t.note=e.note?e.note:null,t.addresses=e.company.addresses?e.company.addresses:[],t.contacts=e.company.contacts?e.company.contacts:[],t.company=e.company?e.company:{},Vendor.detail=t,t},J=function(e,t){Console.log("updateVendor()",e);if(e)try{sendPostRequest("/api/v1.0/vendors/update",e,function(e,n,o){return Console.log("data",e),e?t(e):H("Oops: 1")})}catch(e){Console.log(e)}},Y=function(){let e=Vendor.build();e.company_detail=Company.build(),e&&confirmDialog("Would you like to update?",t=>{t&&(Console.log("vendor_detail",e),J(e,function(e){if(Console.log("data",e),e)if(Console.log("data 1",e),e[0]){Console.log("data[0] 1",e[0]);let t=e[0];if(t.id)if(""===i.value||isNaN(parseInt(i.value)))window.location.replace("/vendors/"+t.id);else{let e=C.value;toastr.success(`Vendor ${e} has been updated.`)}else Console.log("details 1",t)}else Console.log("details 2",e);else Console.log("details 3",provider)}))})},K=function(e){e&&J(e,function(e){if(e)if(Console.log("data",e),Console.log(e.length),e[0]){Console.log("data[0]",e[0]);let t=e[0];if(t.id)if(Console.log("details.id",t.id),Console.log("_vendor_id.value",i.value),""===i.value||isNaN(parseInt(i.value)))window.location.replace("/vendors/"+t.id);else{let e=C.value;toastr.success(`Vendor ${e} has been updated.`)}else Console.log("details 1",t)}else Console.log("details 2",e);else Console.log("details 3",provider)})},X=function(e){Vendor.all=new Map,e&&$.each(e,function(e,t){let n=z(t);R.insertRow(n),Vendor.all.set(n.id,n)}),Console.log(" Vendor.all",Vendor.all)},Z=function(e){let t={};e&&e.company&&(t=e.company),a&&(d&&(d.value=e.name?e.name:"",d&&$(d).on("change",function(){setTimeout(function(){let e=d.value;T=!1,""===e?(d.value="",o.value=""):Q(e)},200)}).on("click",function(){$(this).select()}).autocomplete({serviceUrl:"/api/v1.0/autocomplete/vendors",minChars:2,cache:!1,dataType:"json",triggerSelectOnValidInput:!1,paramName:"st",onSelect:function(e){e.data}})),i&&(i.value=e.id?e.id:""),o&&(o.value=t.id?t.id:""),u&&(u.value=e.sku?e.sku:""),_&&(_.checked=!e.enabled||1===e.enabled),s&&(s.checked=1===e.is_provider),l&&(l.checked=1===e.show_online),c&&(c.checked=1===e.show_ops),r&&(r.checked=1===e.show_sales),validator_init(q),D=$(a).validate())},ee=function(e){g&&(validator_init(P),S=$(g).validate()),R=$(f).table({table_type:"display_list",data:Vendor.all,columnDefs:[{title:"Id",targets:0,data:"id",render:function(e,t,n,o){return"<span style='white-space: nowrap;'>"+e+"</span>"}},{title:"Name",targets:1,data:"name",render:function(e,t,n,o){return"<span style='white-space: nowrap;'>"+e+"</span>"}},{title:"SKU",targets:2,data:"sku",render:function(e,t,n,o){return"<span style='white-space: nowrap;'>"+e+"</span>"}}],rowClick:Vendor.navigate}),e&&e.vendors&&X(e.vendors)},te=function(){d&&($(s).attr("readonly",!0),s.disabled=!0,$(d).attr("readonly",!0),$(i).attr("readonly",!0),$(u).attr("readonly",!0),$(s).attr("readonly",!0))};return{validator:null,detail:{},all:new Map,newVendor:function(e,t){return j(e,t)},index:function(e){ee(e)},setProvider:function(){Console.log("Set Provider"),m&&(s.checked=!0,$(s).attr("readonly","true"),s.disabled=!0,$(d).attr("readonly","true"),$(i).attr("readonly","true"),$(u).attr("readonly","true"),$(s).attr("readonly","true"))},get:function(e){},load_all:function(e){X(e)},reset_form:function(){d.value="",i.value="",o.value="",l.checked=!0,r.checked=!0,c.checked=!0,s.checked=!0,u.value="",_.checked=!0},save:function(e){K(e)},init:function(e){Z(e)},build:function(){if($(a).valid())return remove_nulls({id:isNaN(parseInt(i.value))?null:parseInt(i.value),company_id:isNaN(parseInt(o.value))?null:parseInt(o.value),name:""!==d.value?d.value:null,status_id:10,enabled:_.checked?1:0,show_online:!0===l.checked?1:0,show_sales:!0===r.checked?1:0,show_ops:!0===c.checked?1:0,is_provider:!0===s.checked?1:0,sku:u.value})},navigate:function(e){!function(e){e&&e.id&&window.location.replace("/vendors/"+e.id)}(e)},edit:function(t){!function(t){let n=[],o=[],a={},d={};t&&t.vendor_detail&&(d=z(t.vendor_detail),n=t.address_detail?t.address_detail:[],o=t.contact_detail?t.contact_detail:[],a=t.company_detail?t.company_detail:{}),$(e).removeClass("disabled"),Vendor.init(d),Address.init(n),Contact.init(o),Company.init(a),te()}(t)},setVendor:function(){te()}}}(),MessageTypes=function(){"use strict";document.getElementById("input_message_types_id"),document.getElementById("input_message_types_name"),document.getElementById("input_message_types_icon"),document.getElementById("input_message_types_sort_order"),document.getElementById("input_message_types_enabled"),document.getElementById("input_message_types_date_created"),document.getElementById("input_message_types_created_by"),document.getElementById("input_message_types_date_modified"),document.getElementById("input_message_types_modified_by"),document.getElementById("input_message_types_note");let e=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4;const t=function(t){let n={id:null,name:null,icon:null,sort_order:null,enabled:1,date_created:formatDateMySQL(),created_by:e,date_modified:formatDateMySQL(),modified_by:e,note:null};return t&&(n.id=t.id?t.id:null,n.name=t.name?t.name:null,n.icon=t.icon?t.icon:null,n.sort_order=t.sort_order?t.sort_order:null,n.enabled=t.enabled?t.enabled:1,n.date_created=t.date_created?t.date_created:formatDateMySQL(),n.created_by=t.created_by?t.created_by:created_by,n.date_modified=t.date_modified?t.date_modified:formatDateMySQL(),n.modified_by=t.modified_by?t.modified_by:modified_by,n.note=t.note?t.note:null),MessageTypes.detail=n,n};return{validator:null,detail:{},all:new Map,get:function(e){},load_all:function(e){var n;n=e,MessageTypes.all=new Map,n&&($.each(n,function(e,n){let o=t(n);MessageTypes.all.set("id",o)}),Console.log(" MessageTypes.all",MessageTypes.all))},save:function(e){},init:function(){Console.log(" -- MessageTypes -- ",{})}}}(),PricingStrategyTypes=function(){"use strict";document.getElementById("input_pricing_strategy_types_id"),document.getElementById("input_pricing_strategy_types_name"),document.getElementById("input_pricing_strategy_types_enabled"),document.getElementById("input_pricing_strategy_types_date_created"),document.getElementById("input_pricing_strategy_types_created_by"),document.getElementById("input_pricing_strategy_types_date_modified"),document.getElementById("input_pricing_strategy_types_modified_by"),document.getElementById("input_pricing_strategy_types_note");let e=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4;const t=function(t){let n={id:null,name:null,enabled:1,date_created:formatDateMySQL(),created_by:e,date_modified:formatDateMySQL(),modified_by:e,note:null};return t&&(n.id=t.id?t.id:null,n.name=t.name?t.name:null,n.enabled=t.enabled?t.enabled:1,n.date_created=t.date_created?t.date_created:formatDateMySQL(),n.created_by=t.created_by?t.created_by:created_by,n.date_modified=t.date_modified?t.date_modified:formatDateMySQL(),n.modified_by=t.modified_by?t.modified_by:modified_by,n.note=t.note?t.note:null),PricingStrategyTypes.detail=n,n};return{validator:null,detail:{},all:new Map,get:function(e){},load_all:function(e){var n;n=e,PricingStrategyTypes.all=new Map,n&&($.each(n,function(e,n){let o=t(n);PricingStrategyTypes.all.set("id",o)}),Console.log(" PricingStrategyTypes.all",PricingStrategyTypes.all))},save:function(e){},init:function(){}}}();PricingStrategyTypes.init();const RatingTypes=function(){"use strict";document.getElementById("input_rating_types_id"),document.getElementById("input_rating_types_name"),document.getElementById("input_rating_types_enabled"),document.getElementById("input_rating_types_date_created"),document.getElementById("input_rating_types_created_by"),document.getElementById("input_rating_types_date_modified"),document.getElementById("input_rating_types_modified_by"),document.getElementById("input_rating_types_note");let e=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4;const t=function(t){let n={id:null,name:null,enabled:1,date_created:formatDateMySQL(),created_by:e,date_modified:formatDateMySQL(),modified_by:e,note:null};return t&&(n.id=t.id?t.id:null,n.name=t.name?t.name:null,n.enabled=t.enabled?t.enabled:1,n.date_created=t.date_created?t.date_created:formatDateMySQL(),n.created_by=t.created_by?t.created_by:created_by,n.date_modified=t.date_modified?t.date_modified:formatDateMySQL(),n.modified_by=t.modified_by?t.modified_by:modified_by,n.note=t.note?t.note:null),RatingTypes.detail=n,n};return{validator:null,detail:{},all:new Map,get:function(e){},load_all:function(e){var n;n=e,RatingTypes.all=new Map,n&&($.each(n,function(e,n){let o=t(n);RatingTypes.all.set("id",o)}),Console.log(" RatingTypes.all",RatingTypes.all))},save:function(e){},init:function(){Console.log(" -- RatingTypes -- ",{})}}}(),SalesTypes=function(){"use strict";document.getElementById("input_sales_types_id"),document.getElementById("input_sales_types_name"),document.getElementById("input_sales_types_class"),document.getElementById("input_sales_types_sort_order"),document.getElementById("input_sales_types_enabled"),document.getElementById("input_sales_types_date_created"),document.getElementById("input_sales_types_created_by"),document.getElementById("input_sales_types_date_modified"),document.getElementById("input_sales_types_modified_by"),document.getElementById("input_sales_types_note");let e=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4;const t=function(t){let n={id:null,name:null,class:null,sort_order:null,enabled:1,date_created:formatDateMySQL(),created_by:e,date_modified:formatDateMySQL(),modified_by:e,note:null};return t&&(n.id=t.id?t.id:null,n.name=t.name?t.name:null,n.class=t.class?t.class:null,n.sort_order=t.sort_order?t.sort_order:null,n.enabled=t.enabled?t.enabled:1,n.date_created=t.date_created?t.date_created:formatDateMySQL(),n.created_by=t.created_by?t.created_by:created_by,n.date_modified=t.date_modified?t.date_modified:formatDateMySQL(),n.modified_by=t.modified_by?t.modified_by:modified_by,n.note=t.note?t.note:null),SalesTypes.detail=n,n};return{validator:null,detail:{},all:new Map,get:function(e){},load_all:function(e){var n;n=e,SalesTypes.all=new Map,n&&($.each(n,function(e,n){let o=t(n);SalesTypes.all.set("id",o)}),Console.log(" SalesTypes.all",SalesTypes.all))},save:function(e){},init:function(){Console.log(" -- SalesTypes -- ",{})}}}(),StatusTypes=function(){"use strict";document.getElementById("input_status_types_id"),document.getElementById("input_status_types_name"),document.getElementById("input_status_types_enabled"),document.getElementById("input_status_types_date_created"),document.getElementById("input_status_types_created_by"),document.getElementById("input_status_types_date_modified"),document.getElementById("input_status_types_modified_by"),document.getElementById("input_status_types_note"),document.getElementById("input_status_types_sort_order");let e=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4;const t=function(t){let n={id:null,name:null,enabled:1,date_created:formatDateMySQL(),created_by:e,date_modified:formatDateMySQL(),modified_by:e,note:null,sort_order:null};return t&&(n.id=t.id?t.id:null,n.name=t.name?t.name:null,n.enabled=t.enabled?t.enabled:1,n.date_created=t.date_created?t.date_created:formatDateMySQL(),n.created_by=t.created_by?t.created_by:created_by,n.date_modified=t.date_modified?t.date_modified:formatDateMySQL(),n.modified_by=t.modified_by?t.modified_by:modified_by,n.note=t.note?t.note:null,n.sort_order=t.sort_order?t.sort_order:null),StatusTypes.detail=n,n};return{validator:null,detail:{},all:new Map,get:function(e){},load_all:function(e){var n;n=e,StatusTypes.all=new Map,n&&$.each(n,function(e,n){let o=t(n);StatusTypes.all.set("id",o)})},save:function(e){},init:function(){Console.log(" -- StatusTypes -- ",{})}}}(),Types=function(){"use strict";const e=function(e,t){$.each(e,function(e,n){Types[t].set(n.id,n)})};return{address_types:new Map,season_types:new Map,airport_types:new Map,categories_ratings_types:new Map,category:new Map,color_scheme:new Map,contact_types:new Map,currency:new Map,location_types:new Map,message_types:new Map,pricing_strategy_types:new Map,rating_types:new Map,sales_types:new Map,status_types:new Map,init:function(t){t&&function(t){Types.address_types=new Map,Types.airport_types=new Map,Types.categories_ratings_types=new Map,Types.category=new Map,Types.color_scheme=new Map,Types.contact_types=new Map,Types.currency=new Map,Types.location_types=new Map,Types.message_types=new Map,Types.pricing_strategy_types=new Map,Types.rating_types=new Map,Types.sales_types=new Map,Types.status_types=new Map,Country.all=new Map,t.address_types&&e(t.address_types,"address_types"),t.season_types&&(e(t.season_types,"season_types"),Season.init({seasons:t.season_types})),t.airport_types&&e(t.airport_types,"airport_types"),t.category&&(e(t.category,"category"),Category.init({categories:t.category})),t.color_scheme&&e(t.color_scheme,"color_scheme"),t.contact_types&&e(t.contact_types,"contact_types"),t.currency&&e(t.currency,"currency"),t.location_types&&e(t.location_types,"location_types"),t.message_types&&e(t.message_types,"message_types"),t.pricing_strategy_types&&e(t.pricing_strategy_types,"pricing_strategy_types"),t.rating_types&&e(t.rating_types,"rating_types"),t.sales_types&&e(t.sales_types,"sales_types"),t.status_types&&e(t.status_types,"status_types"),t.countries&&Country.load_all(t.countries)}(t)}}}(),Login=function(){"use strict";document.getElementById("dataToSend");const e=document.getElementById("email"),t=document.getElementById("password"),n=document.getElementById("button_login_submit"),o=document.getElementById("button_login_register"),a=document.getElementById("form_login"),d=document.getElementById("register_form_submit_button"),i=document.getElementById("register_page_form"),l=document.getElementById("register_page"),r=function(e,t){return Login.validator=validator_init(t),$(e).valid()},c=function(d){let i={rules:{email:{required:!0,email:!0},password:{required:!0}},messages:{email:{required:"Field Required",email:"Field invalid"},password:{required:"Field Required"}}};Login.validator=validator_init(i),$(o).on("click",function(){}),$(n).on("click",function(){c()});const l=function(e){toastr.error(e)},c=function(){if(r(a,i)){let n={email:e.value,password:t.value};!function(e){if(!e)return l("Error: 3");try{sendPostRequest("/api/v1.0/users/login",e,function(e,t,n){if(Console.log("data",e.id),!e||!e.id)return l("Error Logging In: 1");e.id&&window.location.replace("/")})}catch(e){return console.error("Error",e),l("Error: 2")}}(remove_nulls(n))}}};return{detail:{},all:new Map,validator:null,init:function(e){!function(e){a&&Login.login(e),l&&Login.register(e)}(e)},login:function(e){c()},register:function(e){!function(e){let t={rules:{user_name_first:{required:!0},user_name_last:{required:!0},user_email:{required:!0,email:!0},user_password:{required:!0,minlength:5},user_password_confirm:{required:!0,minlength:5,equalTo:"#user_password"}},messages:{user_name_first:{required:"Field Required"},user_name_last:{required:"Field Required"},user_email:{required:"Field Required",email:"Field invalid"},user_password:{required:"Field Required"}}};const n=document.getElementById("user_name_first"),o=document.getElementById("user_name_last"),a=document.getElementById("user_email"),l=document.getElementById("user_password");Login.validator=validator_init(t),$(d).on("click",function(){c()});const c=function(){if(r(i,t)){let e={name_first:n.value,name_last:o.value,email:a.value,password:l.value};s(remove_nulls(e))}},s=function(e){if(Console.log("Login.register->send_register",e),!e)return handle_login_error("Error: 3");try{sendPostRequest("/api/v1.0/users/register",e,function(e,t,n){if(Console.log("data",e.id),!e||!e.id)return handle_login_error("Error Logging In: 1");e.id&&window.location.replace("/")})}catch(e){return console.error("Error",e),handle_login_error("Error: 2")}}}()}}}();Login.init();const Provider=function(){"use strict";const e=document.getElementById("button_add_provider_page_heading"),t=document.getElementById("button_edit_provider_name"),n=document.getElementById("button_save_provider"),o=document.getElementById("panel_tab_contact"),a=document.getElementById("panel_tab_vendor"),d=document.getElementById("panel_tab_address"),i=document.getElementById("panel_tab_provider"),l=document.getElementById("table_provider_index"),r=document.getElementById("location_id"),c=document.getElementById("company_name"),s=document.getElementById("provider_id"),u=document.getElementById("provider_name"),_=document.getElementById("provider_company_id"),m=document.getElementById("provider_enabled"),p=document.getElementById("provider_code_direct_id"),y=document.getElementById("vendor_name"),f=document.getElementById("vendor_company_id"),g=document.getElementById("company_id"),v=document.getElementById("location_name_filter_id"),b=document.getElementById("form_edit_provider"),h=document.getElementById("form_product_add"),I=document.getElementById("modal_product_provider_name"),E=document.getElementById("modal_product_provider_id"),C=document.getElementById("modal_product_vendor_id"),B=document.getElementById("modal_product_vendor_name"),w=document.getElementById("modal_product_vendor_company_id"),k=document.getElementById("modal_product_provider_company_id"),x=document.getElementById("modal_product_provider_vendor_match"),L=document.getElementById("modal_product_provider_location_id"),M=document.getElementById("modal_product_location_id");let S,D=!1,N=!1,T=$(l),q=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4,P={rules:{provider_name:{required:!0},provider_company_id:{required:!0}},messages:{provider_company_id:{required:"Field Required"},provider_name:{required:"Field Required"}}};$(n).on("click",function(){let e=$("#provider_edit_tabs > li.nav-item > a.nav-link"),t=$("div.tab-pane"),n=Company.build(),o=Provider.build(),a=Location.build(),d=Vendor.build(),i=Array.from(Address.all.values()),l=Array.from(Contact.all.values());n&&o&&a&&d&&i&&l?(o.location_id=a.id?a.id:null,d.is_provider=b?1:0,confirmDialog("Would you like to update?",e=>{e&&V({company_detail:n,provider_detail:o,location_detail:a,vendor_detail:d,addresses:i,contacts:l})})):$.each(t,function(n,o){if($(this).find(".is-invalid").length>0){let n=$("body").find("[aria-controls='"+$(this).attr("id")+"']");return e.removeClass("active"),t.removeClass("active"),$(this).addClass("active"),n.addClass("active"),!1}})}),$("#provider_edit").on("change",function(){G()}),$(_).on("change",function(){$(f).val($(this).val())}),$(e).on("click",function(){}),$(t).on("click",function(){H()}),$(g).on("change",function(){$(_).val(g.value)});const R=function(){$(u).on("change",function(){}).on("search",function(){Provider.reset_form(),Vendor.reset_form()}).on("click",function(){$(this).select()}).autocomplete({serviceUrl:"/api/v1.0/autocomplete/providers",minChars:2,cache:!1,dataType:"json",triggerSelectOnValidInput:!1,paramName:"st",onSelect:function(e){if(!e.data)return;Console.log("suggestion.data",e.data);let t=e.data,n=t.company?t.company:{},o=(t.addresses&&t.addresses,t.contacts&&t.contacts,t.location?t.location:{}),a=(t.vendor&&t.vendor,t.id),d=t.company.name,i=t.company.id;b&&($(_).val(i),$(s).val(a),confirmDialog("This provider exists. Would you like to edit it?",e=>{e?(window.location.replace("/providers/"+a),z(t),Company.populate_form(n),Location.populate_form(o),$(f).val(i),$(y).val(d).trigger("change")):(Provider.reset_form(),Vendor.reset_form())}))}}),$(I).on("change",function(){setTimeout(function(){let e=I.value;!1===D&&(""===e?(C.value="",E.value="",B.value="",I.value="",w.value="",k.value="",L.value="",B.disabled=!0,Product.attr2=null,Product.attr3=null,Product.update_product_sku(),D=!1):Q(e))},200)}).on("search",function(){C.value="",E.value="",B.value="",I.value="",w.value="",k.value="",L.value="",Product.attr2=null,Product.attr3=null,Product.update_product_sku(),B.disabled=!0}).on("click",function(){$(this).select()}).autocomplete({serviceUrl:"/api/v1.0/autocomplete/providers",minChars:2,cache:!1,dataType:"json",triggerSelectOnValidInput:!1,paramName:"st",onSelect:function(e){if(!e||!e.data)return;Console.log("suggestion.data",e.data);let t=U(e.data),n=t.vendor,o=t.code_direct_id?t.code_direct_id:null,a=n.sku?n.sku:null;C.value=parseInt(e.data.vendor.id),E.value=e.data.id,B.value=e.data.name,w.value=isNaN(parseInt(e.data.company_id))?null:parseInt(e.data.company_id),k.value=isNaN(parseInt(e.data.company_id))?null:parseInt(e.data.company_id),x.checked=!0,B.disabled=!1,L.value=isNaN(parseInt(t.location.id))?null:parseInt(t.location.id),Product.attr2=o,Product.attr3=a,Product.update_product_sku()}})},Q=function(e){if(e&&""!==e){J({name:e},function(e){let t;if(h)if(e&&0!==e.length){e&&(t=e,e.length>0&&(t=e[0])),Console.log("provider",t);let n=t.vendor,o=t.code_direct_id?t.code_direct_id:null,a=n.sku?n.sku:null;Console.log("code_direct",o),Console.log("sku",a),C.value=parseInt(n.id),E.value=t.id,B.value=t.name,w.value=isNaN(parseInt(t.company_id))?null:parseInt(t.company_id),k.value=isNaN(parseInt(t.company_id))?null:parseInt(t.company_id),x.checked=!0,B.disabled=!1,L.value=isNaN(parseInt(t.location.id))?null:parseInt(t.location.id),M.value=isNaN(parseInt(t.location.id))?null:parseInt(t.location.id),Product.attr2=o,Product.attr3=a,Product.update_product_sku()}else confirmDialog("This provider does not exist. Would you like to create it?",e=>{e?Company.add_to_company_list({name:I.value,status_id:10,enabled:1},function(e){if(e&&e[0]){let t=e[0];k.value=t.id,w.value=t.id,I.value=t.name,B.value=t.name,x.checked=!0,function(e){if(Console.log("add",e),e){let t={name:I.value,status_id:1,show_online:1,show_sales:1,show_ops:1,is_provider:1,enabled:1};Vendor.newVendor(t,function(t){let n,o={};t&&(n=t,t[0]&&(n=t[0]),Console.log("Provider Upodating Vendor: vendor_detail",n),e.location_id=e.location_id?e.location_id:1,e.vendor_id=n.id,o={provider_detail:e},Console.log("Provider : provider_detail",o),j(o,function(e){if(e&&(Console.log("data",e),e[0])){let t=e[0],n=t.vendor,o=t.company;U(t),I.value=t.name,E.value=t.id,k.value=o.id,B.value=t.name,C.value=n.id,w.value=o.id,R(),Product.attr2=t.code_direct_id?t.code_direct_id:null,Product.attr3=n.sku?n.sku:null,Product.update_product_sku()}}))})}}(remove_nulls({location_id:null,company_id:t.id,code_direct_id:null,id:null,provider_vendor:1,enabled:1}))}}):(C.value="",E.value="",B.value="",I.value="",D=!1)});b&&(e&&e.length>0&&(t=e[0],confirmDialog("This provider exists. Would you like to edit it?",e=>{e?window.location.href="/providers/"+t.id:(Company.reset_form(),Provider.reset_form(),Vendor.reset_form())})),Console.log("provider",t),$(y).val($(u).val()).trigger("change"))})}},A=function(){T=$(l).table({table_type:"display_list",data:Provider.all,columnDefs:[{title:"Name",targets:0,data:"name",render:function(e,t,n,o){return"<span style='white-space: nowrap;'>"+e+"</span>"}},{title:"Code Direct ID",targets:1,data:"code_direct_id",render:function(e,t,n,o){return"<span style='white-space: nowrap;'>"+e+"</span>"}},{title:"SKU",targets:2,data:"vendor",render:function(e,t,n,o){return"<span style='white-space: nowrap;'>"+e.sku+"</span>"}},{title:"Location",targets:3,data:"location",render:function(e,t,n,o){let a="";return"<span style='white-space: nowrap;'>"+(a=e.display_medium)+"</span>"}}],rowClick:Provider.navigate})},F=function(e){toastr.error(e)},O=function(e){Provider.all=new Map,e&&$.each(e,function(e,t){let n=U(t);T.insertRow(n),Provider.all.set(n.id,n)})},V=function(e){Console.log("save",e),e&&j(e,function(t){if(t)if(Console.log("data 1",t),t[0]){Console.log("data[0] 1",t[0]);let e=t[0];if(e.id)if(""===s.value||isNaN(parseInt(s.value)))window.location.replace("/providers/"+e.id);else{let e=c.value;toastr.success(`Provider ${e} has been updated.`)}else Console.log("details 1",e)}else Console.log("details 2",t);else Console.log("details 3",e)})},j=function(e,t){if(e)try{sendPostRequest("/api/v1.0/providers/update",e,function(e,n,o){return e?t(e):F("Oops: 1")})}catch(e){Console.log(e)}},U=function(e){let t={addresses:[],contacts:[],location:{},company:{},vendor:{},id:null,description_long:null,description_short:null,keywords:null,company_id:null,name:null,code_direct_id:null,provider_vendor:1,enabled:1,date_created:formatDateMySQL(),created_by:q,date_modified:formatDateMySQL(),modified_by:q,note:null};return e&&(t.id=e.id?e.id:null,t.name=e.name?e.name:null,t.location_id=e.location_id?e.location_id:null,t.code_direct_id=e.code_direct_id?e.code_direct_id:null,t.description_long=e.description_long?e.description_long:null,t.description_short=e.description_short?e.description_short:null,t.keywords=e.keywords?e.keywords:null,t.provider_vendor=e.provider_vendor?e.provider_vendor:1,t.enabled=e.enabled?e.enabled:1,t.date_created=e.date_created?e.date_created:formatDateMySQL(),t.company_id=e.company_id?e.company_id:null,t.created_by=e.created_by?e.created_by:q,t.date_modified=e.date_modified?e.date_modified:formatDateMySQL(),t.modified_by=e.modified_by?e.modified_by:q,t.note=e.note?e.note:null,t.vendor=e.vendor?e.vendor:{},t.addresses=e.addresses?e.addresses:[],t.contacts=e.contacts?e.contacts:[],t.location=e.location?e.location:{},t.company=e.company?e.company:{}),Provider.detail=t,t},H=function(){""!==s.value&&_.value},G=function(){Console.log("set_progress()");isNaN(s.value)||s.value;let e=isNaN(_.value)?null:_.value;null===e||""===e?($(o).addClass("disabled"),$(d).addClass("disabled"),$(i).addClass("disabled"),$(a).addClass("disabled")):($(o).removeClass("disabled"),$(d).removeClass("disabled"),$(i).removeClass("disabled"),$(a).removeClass("disabled")),n.disabled=!(""!==g.value&&""!==v.value)},W=function(){$(u).attr("readonly",!0),b&&(N||$(c).attr("readonly",!0))},z=function(e){e&&(s.value=e.id?e.id:null,$(u).val(e.name?e.name:null),$(c).val($(u).val()),_.value=e.company_id?e.company_id:null,p.value=e.code_direct_id?e.code_direct_id:null,m.checked=!e.enabled||1===e.enabled)},J=function(e,t){if(!e)return F("Error Loading Company- Missing Data");try{sendGetRequest("/api/v1.0/providers/validate",e,function(e,n,o){return e?t(e):F("Oops: 1")})}catch(e){return Console.log(e),F("Error Validating Company")}};return{validator:null,detail:{},all:new Map,navigate:function(e){!function(e){e&&e.id&&window.location.replace("/providers/"+e.id)}(e)},get:function(e){get(e)},build:function(){if($(b).valid())return remove_nulls({location_id:isNaN(parseInt(r.value))?null:parseInt(r.value),company_id:isNaN(parseInt(_.value))?null:parseInt(_.value),code_direct_id:""===p.value?null:p.value,id:isNaN(parseInt(s.value))?null:parseInt(s.value),provider_vendor:b?1:0,enabled:1})},load_all:function(e){O(e)},save:function(e){V(e)},init:function(){R()},reset_form:function(){s.value="",$(u).val("").trigger("change"),_.value="",p.value="",m.checked=!0},provider_exists:function(e){Q(e)},enable_form_fields:function(){H()},disable_form_fields:function(){W()},index:function(e){var t;t=e,A(),t&&t.providers&&O(t.providers)},edit:function(e){!function(e){let t={},o=[],l=[],r={},c={},s={};b&&(R(),validator_init(P),S=$(b).validate()),e&&(e.is_new&&(N=e.is_new,n.disabled=!0,$(i).addClass("disabled"),$(a).addClass("disabled"),$(d).addClass("disabled")),e.provider_detail&&(o=(t=U(e.provider_detail)).addresses?t.addresses:[],l=t.contacts?t.contacts:[],r=t.location?t.location:{},c=t.company?t.company:{},s=t.vendor?t.vendor:{})),z(t),Vendor.init(s),Location.init(r),Address.init(o),Contact.init(l),Company.init(c),Vendor.setProvider(),W(),G()}(e)}}}(),Product=function(){"use strict";const e=document.getElementById("form_product_add"),t=document.getElementById("product_edit_page"),n=document.getElementById("button_add_product_page_heading"),o=document.getElementById("modal_button_cancel_add_product"),a=document.getElementById("modal_button_submit_add_product"),d=document.getElementById("modal_product_provider_name"),i=document.getElementById("modal_product_vendor_name"),l=document.getElementById("modal_product_provider_id"),r=document.getElementById("modal_product_vendor_id"),c=document.getElementById("modal_new_product"),s=document.getElementById("modal_product_name"),u=document.getElementById("modal_product_category_id"),_=document.getElementById("modal_product_sku"),m=document.getElementById("modal_product_rating_types_id"),p=document.getElementById("modal_product_currency_id"),y=document.getElementById("modal_product_pricing_strategies_types_id"),f=document.getElementById("modal_product_provider_company_id"),g=document.getElementById("modal_product_vendor_company_id"),v=document.getElementById("modal_product_provider_vendor_match"),b=document.getElementById("modal_product_provider_location_id"),h=document.getElementById("modal_product_location_id"),I=(document.getElementById("panel_hotels"),document.getElementById("panel_flights"),document.getElementById("panel_cars"),document.getElementById("panel_rails"),document.getElementById("panel_transport"),document.getElementById("panel_tours"),document.getElementById("panel_cruises"),document.getElementById("panel_packages"),document.getElementById("panel_other"),document.getElementById("form_product_search_panel_hotels"),document.getElementById("form_product_search_panel_flights"),document.getElementById("form_product_search_panel_cars"),document.getElementById("form_product_search_panel_rails"),document.getElementById("form_product_search_panel_transport"),document.getElementById("form_product_search_panel_tours"),document.getElementById("form_product_search_panel_cruises"),document.getElementById("form_product_search_panel_packages"),document.getElementById("form_product_search_panel_other"),document.getElementById("form_product_search_hotel_product_name"),document.getElementById("button_product_search_panel_hotels_clear"),document.getElementById("button_product_search_panel_hotels_submit"),document.getElementById("product_index_page")),E=document.getElementById("product_index_table");let C,B,w=document.getElementById("user_id")?isNaN(parseInt(document.getElementById("user_id").value))?4:parseInt(document.getElementById("user_id").value):4,k={rules:{modal_product_sku:{required:!0},modal_product_rating_types_id:{required:!0},modal_product_currency_id:{required:!0},modal_product_pricing_strategies_types_id:{required:!0},modal_product_name:{required:!0},modal_product_category_id:{required:!0},modal_product_provider_name:{required:!0},modal_product_provider_id:{required:!0},modal_product_provider_company_id:{required:!0},modal_product_vendor_name:{required:!0},modal_product_vendor_id:{required:!0},modal_product_vendor_company_id:{required:!0}},messages:{modal_product_sku:{required:"Field Required"},modal_product_rating_types_id:{required:"Field Required"},modal_product_currency_id:{required:"Field Required"},modal_product_pricing_strategies_types_id:{required:"Field Required"},modal_product_name:{required:"Field Required"},modal_product_provider_id:{required:"Field Required"},modal_product_category_id:{required:"Field Required"},modal_product_provider_name:{required:"Field Required"},modal_product_vendor_name:{required:"Field Required"},modal_product_provider_company_id:{required:"Field Required"},modal_product_vendor_id:{required:"Field Required"},modal_product_vendor_company_id:{required:"Field Required"}}};$(n).on("click",function(){S()}),$(c).on("hide.bs.modal",function(){clear_validation(e)}),$(o).on("click",function(){clear_validation(e),$(c).modal("hide")}),$(a).on("click",function(){M()&&confirmDialog("Would you like to update?",e=>{e&&x()})}),$(v).on("change",function(){null!==(isNaN(parseInt(f.value))?null:parseInt(f.value))&&(v.checked?(g.value=f.value,null!==Provider.detail?(g.value=Provider.detail.vendor.company_id,r.value=Provider.detail.vendor.id,i.value=Provider.detail.vendor.name):(g.value="",r.value="",i.value="")):(g.value="",r.value="",i.value=""))});const x=function(){Console.log("save_new()");let e=function(){let e={category_id:isNaN(parseInt(u.value))?null:parseInt(u.value),pricing_strategy_types_id:isNaN(parseInt(y.value))?null:parseInt(y.value),status_types_id:1,currency_id:isNaN(parseInt(p.value))?null:parseInt(p.value),location_id:isNaN(parseInt(h.value))?null:parseInt(h.value),rating_types_id:isNaN(parseInt(m.value))?null:parseInt(m.value),provider_id:isNaN(parseInt(l.value))?null:parseInt(l.value),vendor_id:isNaN(parseInt(r.value))?null:parseInt(r.value),provider_vendor_match:(isNaN(parseInt(f.value))?null:parseInt(f.value))===(isNaN(parseInt(g.value))?null:parseInt(g.value))?1:0,name:s.value,sku:_.value,use_provider_location_id:1};return remove_nulls(e)}();Console.log("dataToSend",remove_nulls(e)),L(e,function(e){let t;e&&(Console.log("data",e),t=e,1===e.length&&(t=e[0])),t.id&&window.location.replace("/products/"+t.id)})},L=function(e,t){if(e)try{sendPostRequest("/api/v1.0/products/add",e,function(e,n,o){return e?t(e):D("Oops: 1")})}catch(e){Console.log(e)}},M=function(){return Console.log("validate_new_form",""),!!e&&$(e).valid()},S=function(){s.value="",u.value="",_.value="",m.value="",p.value="",f.value="",g.value="",i.disabled=!0,d.disabled=!0,y.value="",b.value="",h.value="",Product.attr1=null,Product.attr2=null,Product.attr3=null,Product.update_product_sku(),Product.reset_new_product_details(),clear_validation(e),$(c).modal("show")},D=function(e){toastr.error(e)},N=function(e){let t={id:null,category_id:null,pricing_strategy_types_id:null,status_types_id:null,product_status_types_id:null,currency_id:null,location_id:null,city_id:null,vendor_id:null,provider_id:null,name:null,provider_vendor_match:1,description_short:null,description_long:null,rating:null,sku:null,phone:null,infant:null,child:null,teen:null,depart_from:null,arrive_to:null,depart_time:null,arrive_time:null,day_span:null,cover_image:null,api_id:null,from_api:1,hotel_code:null,enabled:1,date_created:formatDateMySQL(),created_by:w,date_modified:formatDateMySQL(),modified_by:w,note:null,keywords:[],seasons:[],units:[],use_provider_location:0,variants:[],category:{},location:{},vendor:{},profiles:[],provider:{}};return e&&(t.id=e.id?e.id:null,t.category_id=e.category_id?e.category_id:null,t.pricing_strategy_types_id=e.pricing_strategy_types_id?e.pricing_strategy_types_id:null,t.status_types_id=e.status_types_id?e.status_types_id:null,t.product_status_types_id=e.product_status_types_id?e.product_status_types_id:null,t.currency_id=e.currency_id?e.currency_id:null,t.location_id=e.location_id?e.location_id:null,t.city_id=e.city_id?e.city_id:null,t.vendor_id=e.vendor_id?e.vendor_id:null,t.provider_id=e.provider_id?e.provider_id:null,t.name=e.name?e.name:null,t.provider_vendor_match=e.provider_vendor_match?e.provider_vendor_match:1,t.description_short=e.description_short?e.description_short:null,t.description_long=e.description_long?e.description_long:null,t.rating=e.rating?e.rating:null,t.sku=e.sku?e.sku:null,t.phone=e.phone?e.phone:null,t.infant=e.infant?e.infant:null,t.child=e.child?e.child:null,t.teen=e.teen?e.teen:null,t.depart_from=e.depart_from?e.depart_from:null,t.arrive_to=e.arrive_to?e.arrive_to:null,t.depart_time=e.depart_time?e.depart_time:null,t.arrive_time=e.arrive_time?e.arrive_time:null,t.day_span=e.day_span?e.day_span:null,t.cover_image=e.cover_image?e.cover_image:null,t.api_id=e.api_id?e.api_id:null,t.from_api=e.from_api?e.from_api:1,t.hotel_code=e.hotel_code?e.hotel_code:null,t.enabled=e.enabled?e.enabled:1,t.date_created=e.date_created?e.date_created:formatDateMySQL(),t.created_by=e.created_by?e.created_by:w,t.date_modified=e.date_modified?e.date_modified:formatDateMySQL(),t.modified_by=e.modified_by?e.modified_by:w,t.note=e.note?e.note:null,t.category=e.category?e.category:{},t.keywords=e.keywords?e.keywords:[],t.seasons=e.seasons?e.seasons:[],t.units=e.units?e.units:[],t.use_provider_location=e.use_provider_location?e.use_provider_location:0,t.variants=e.variants?e.variants:[],t.location=e.location?e.location:{},t.vendor=e.vendor?e.vendor:{},t.provider=e.provider?e.provider:{}),Product.detail=t,t},T=function(e){Product.all=new Map,e&&$.each(e,function(e,t){let n=N(t);C.insertRow(n),Product.all.set("id",n)})};let q,P={},R=document.querySelectorAll('input[type=radio][name="location_to_use"]');const Q=document.getElementById("use_provider_location"),A=document.getElementById("use_product_location"),F=function(e){Console.log("value",this.value),"use_provider_location"===this.value?(Console.log("use_provider_location",q),Location.init(q)):"use_product_location"===this.value&&(Console.log("use_product_location",P),Location.init(P))},O=function(e){Console.log("Product.load_product_location(product_location)",e),P=e;let t=$("#map-container-product-location").find("iframe");Console.log("$frame",t.attr("src"));let n=buildMapsURL(e);Console.log("url",n),t.attr("src",n)},V=function(e){Console.log("Product.load_provider_location(provider_location)",e),q=e;let t=$("#map-container-provider-location").find("iframe");Console.log("$frame",t.attr("src"));let n=buildMapsURL(e);Console.log("url",n),t.attr("src",n)},j=function(e){Console.log("Product.init_edit_form(settings)",e);let t={location:{},provider:{},vendor:{},seasons:[],units:[],variants:[],profiles:[],matrix:[]};e&&(t=e),Console.log("Product.init_edit_form(): product",t),Array.prototype.forEach.call(R,function(e){e.addEventListener("change",F)}),function(e){let t,n,o,a,d,i,l,r;Console.log("Product.set_edit_form_values(product)",e),e.location&&(o=e.location,Product.product_initial_location=o),Console.log("Product.init(): product_location",o),e.provider&&(t=e.provider),Console.log("Product.init(): provider",t),t.location&&(r=t.location,Product.provider_initial_location=r),Console.log("Product.init(): provider_location",r),e.vendor&&(n=e.vendor),Console.log("Product.init(): vendor",n),e.seasons&&(a=e.seasons),Console.log("Product.init(): seasons",a),e.units&&(d=e.units),Console.log("Product.init(): units",d),e.variants&&(i=e.variants),Console.log("Product.init(): variants",i),e.profiles&&(l=e.profiles),Console.log("Product.init(): profiles",l),e.use_provider_location?($(Q).attr("checked","true"),Location.init(r)):($(A).attr("checked","true"),Location.init(o)),O(o),V(r)}(t)},U=function(e){E&&(C=$(E).table({table_type:"display_list",data:[],columnDefs:[{title:"Name",targets:0,data:"name",render:function(e,t,n,o){return"<span style='white-space: nowrap;'>"+e+"</span>"}},{title:"SKU",targets:1,data:"sku",render:function(e,t,n,o){return"<span style='white-space: nowrap;'>"+e+"</span>"}},{title:"Provider",targets:2,data:"provider",render:function(e,t,n,o){return"<span style='white-space: nowrap;'>"+e.name+"</span>"}},{title:"Vendor",targets:3,data:"vendor",render:function(e,t,n,o){return"<span style='white-space: nowrap;'>"+e.name+"</span>"}},{title:"Location",targets:4,data:"location",render:function(e,t,n,o){let a="";return"<span style='white-space: nowrap;'>"+(a=e.display_medium)+"</span>"}},{title:"Category",targets:5,data:"category",render:function(e,t,n,o){return"<span style='white-space: nowrap;'>"+e.name+"</span>"}}],rowClick:Product.navigate}),e&&T(e))};return{validator:null,product_initial_location:null,provider_initial_location:null,detail:{},all:new Map,attr1:null,attr2:null,attr3:null,update_product_sku:function(){!function(){let e=Product.attr1,t=Product.attr2,n=Product.attr3,o="";is_null(e)||is_null(t)||is_null(n)?(_.value="",is_null(e)&&Console.log("att1 is null",e),is_null(t)&&Console.log("att2 is null",t),is_null(n)&&Console.log("att3 is null",n)):(o=e.replace(/-/g,"")+"-"+t.replace(/-/g,"")+"-"+n.replace(/-/g,""),_.value=o)}()},setNewFormDetails:function(e){Console.log("Product.setNewFormDetails()",e),function(e){Console.log("setNewFormDetails()",e)}(e)},get:function(e){},init_autocomplete:function(){},load_all:function(e){T(e)},save:function(e){},init:function(n){!function(n){let o;Console.log("Product.init()",n),c&&Category.init(),t?n&&(n.product_details&&(o=n.product_details),$(document).ready(function(){j(o)})):I&&(Provider.init(),Product.index(n),e&&(validator_init(k),B=$(e).validate()))}(n)},index:function(e){U(e)},navigate:function(e){!function(e){e&&e.id&&window.location.replace("/products/"+e.id)}(e)},reset_new_product_details:function(){l.value="",r.value="",d.value="",i.value="",s.value="",_.value="",m.value="",p.value="",y.value="",s.disabled=!0,_.disabled=!0,m.disabled=!0,p.disabled=!0,y.disabled=!0},init_new_product_autocomplete:function(){!function(){let e=isNaN(parseInt(u.value))?null:parseInt(u.value);null!==e&&$(s).on("change",function(){}).on("search",function(){}).on("click",function(){$(this).select()}).autocomplete({serviceUrl:"/api/v1.0/autocomplete/products",minChars:2,params:{category_id:e},cache:!1,dataType:"json",triggerSelectOnValidInput:!1,paramName:"st",onSelect:function(e){if(!e||!e.data)return;let t=e.data;Console.log("product",t)}}),Console.log("init_new_product_autocomplete()",e)}()}}}();$(function(){const e=document.getElementById("profile_card"),t=document.getElementById("profile_card_cover_image"),n=document.getElementById("profile_edit_name");$(n).on("click",function(){Console.log("_profile_edit_name:click")});const o=function(){parseInt($(e).outerHeight());let n,o=parseInt($(e).outerWidth()),a=0;n=o/2+"px",a=o+"px",$(t).css({width:"100%",height:"100%","max-height":n+"px"})};window.addEventListener("resize",debounce(function(t){e&&o()})),o()}),$(document).ready(function(){window.addEventListener("resize",debounce(function(e){resize_elements()})),mdbPreloader||Console.log("no preloader"),(new WOW).init(),$(this).scrollTop(0),toastr.options=toastrOptions,$("body").scrollTop(),$.fn.dataTableExt.afnFiltering.push(function(e,t,n){if("dates_table"===e.nTable.id){var o=document.getElementById("min").value,a=document.getElementById("max").value;o=o.substring(6,10)+o.substring(3,5)+o.substring(0,2),a=a.substring(6,10)+a.substring(3,5)+a.substring(0,2);var d=t[1].substring(6,10)+t[1].substring(3,5)+t[1].substring(0,2),i=t[1].substring(6,10)+t[1].substring(3,5)+t[1].substring(0,2);return""===o&&""===a||(o<=d&&""===a||(a>=i&&""===o||o<=d&&a>=i))}return!0}),"scrollRestoration"in history&&(history.scrollRestoration="manual"),$(".button-collapse").sideNav(sideNavOptions),window.scrollTo(0,0),resize_elements(),$(function(){$('[data-toggle="tooltip"]').tooltip()})});